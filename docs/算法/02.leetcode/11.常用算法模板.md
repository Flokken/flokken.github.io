---
title: 常用算法模板
date: 2024-03-24
tags: 
  - null
categories:  
  - 算法
  - leetcode
---

## 模板

### 快速幂

$Question:$给定 a,b,p ，对于每组数据，求出 a^b mod p的值。

```java
 private  long powerMod(int a, int b, int p) {
        long result = 1;
        while (b>0) {
            if (b %2 == 1) {
                result = (result * a) % p;
            }
            a = (a * a) % p;
            b = b >>1;
        }
        return result;
    }
```

为什么对?

以3^ 10 为例，直接算是3^ 10 = 3 * 3 * 3 * 3 * 3 * 3 * 3 * 3 * 3 * 3

但是更好的做法是对10进行二进制分解，得到1010

那么3^10 = $3^{(1*2^3 + 0*2^2 + 1*2^1 + 0*2^0)} = 3^{(2^3)} * 3^{(2^2)}$

a表示底数，b表示次幂

- m %2 == 1 是判断 m 的二进制的最后一位是否为 1
  - 等价于位运算`m&1`
- m >> 1 即右移一位，除以2
- a=a*a，表示下一位要用到的是$a^{2^k}$,  k代表当前的二进制位，k一开始为0。
  - 比如1010，从右向左数，一开始为0时， 为$a^{2^1}$。然后到1，为$a{2^2}$，以此类推
  - 本质原因，1010 对应  8(2^3),   4(2^2) ,  2(2^1),   1(2^0)  。由于我们是以a为底，所以这里是$a^{(2^k)}$
  - 所以每次都是a*a，根源是2^k

#### 例题

#### 50. Pow(x, n)

[50. Pow(x, n)](https://leetcode.cn/problems/powx-n/)

<img src="https://typora-1309665611.cos.ap-nanjing.myqcloud.com/typora/image-20240317100753038.png" alt="image-20240317100753038" style="zoom:67%;" />

几个要求

- n是long型的
- n可以是负数
- x是double类型

**思路**

- 如果n<0，实际上就是拿1/ans

```java
class Solution {
    public double myPow(double x, long n) {
       double ans=0.0;
       ans= n>0?pow(x,n):1.0/pow(x,-n);
       return ans;
    }
    public double pow(double x,long n){
        double ans = 1.0;
        while(n>0){
            if(n%2==1){
                ans=ans*x;
            }
            x=x*x;
            n>>=1;
        }
        return ans;
    }
}
```

### 线性筛求质数



