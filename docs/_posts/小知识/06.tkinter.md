---
title: tkinter基础介绍
date: 2023-03-10 00:00:00
tags: 
  - tkinter
categories: 
  - 小知识
permalink: /pages/f77ec5/
sidebar: auto
---

Tkinter（音为tea-kay-inter）是Tk的Python接口，Tk是Tcl/Tk的GUI工具包。

Tcl（工具命令语言,音为tickle）是嵌入式应用程序，测试，原型设计和GUI开发领域的流行脚本语言。另一方面，Tk是一个开源的多平台小部件工具包，许多不同语言都使用它来构建GUI程序。而Tkinter只是一个使用Tcl/Tk库的C扩展的包装器

- **什么是Tcl?**

  [维基的介绍](https://zh.wikibooks.org/zh-hans/Tcl_編程/簡介#何處獲得_Tcl？)

  [tcl/tk快速入门](http://noyesno.net/page/tcltk/intro.html)

  [Tcl官网与文档](https://www.tcl.tk/)

- **tcl/tk 源码**

  tcl解释器由C语言写成，代码量不是很大，有兴趣的可以研究一下源码 [源码下载](https://sourceforge.net/projects/tcl/files/Tcl/)

## 1 相关概念

GUI编程的三个核心问题

- **屏幕上应显示哪些组件？** 认识组件的形态
- **组件应该放在哪里？** 学习组件布局
- **组件如何交互？** 组件中的事件

### “画板”—— 根窗口

> GUI编程是一门艺术，就如同绘画，我们首先需要一个画板来展现。

```python
import tkinter as tk 

root = tk.Tk()
root.mainloop()
```

### 组件（小控件）

> 有了画板，我们需要思考哪些组件应该出现在窗口中？

```python
import tkinter as tk

root = tk.Tk()

label = tk.Label(root，text ="我是一个标签")
button = tk.Button(root，text ="我是一个按钮")

label.pack()
button.pack()

root.mainloop()
```

### 布局管理（几何管理器）

> 所谓布局，就是指控制窗体容器中各个控件（组件）的位置关系。tkinter 共有三种几何布局管理器，分别是：pack布局，grid布局，place布局。

我们小时候都玩过积木，只要发挥创意，相同的积木可以堆出各种造型。tkinter的控件也可以看做一个个积木，形状或许不同，其本质都是一样的，都是一个积木。这些小控件都是有许多共性的，掌握重要的几个，其他的用法也都大同小异，因此在学习界面编程时，最重要的不是一开始急于学习每个积木的样子，不是学习每个控件怎么用，而是要学习这些控件该怎么放。初始学习中，怎么放远远比怎么用重要的多。而在网上大量的资料中，全都急迫的介绍每个组件怎么用，没人去讲清楚tkinter编程的一些概念，包括布局都是一笔带过，我认为这是本末倒置。

### 事件和回调

所谓事件，就是在用户按下一个键或点击鼠标时，应用程序需要做出的反应。简单说就是对外部刺激做出的反应。

命令绑定的示例

```python
import tkinter as tk

def callback():
    print("被点击了")

root = tk.Tk()
tk.Button(root, text='单击', command=callback).pack()

root.mainloop()
```

## 2.1 基本控件

> tkinter中，每个组件都是一个类，创建某个组件其实就是将这个类实例化。在实例化的过程中，可以通过构造函数给组件设置一些属性，同时还必须给该组件指定一个父容器，意即该组件放置何处。最后，还需要给组件设置一个几何管理器（布局管理器），解决了放哪里的问题，还需要解决怎么放的问题，而布局管理器就是解决怎么放问题的，即设置子组件在父容器中的放置位置。

### 基本控件学习

![img](https://typora-1309665611.cos.ap-nanjing.myqcloud.com/typora/Snipaste_2019-04-10_11-01-20.jpg)

```python
from tkinter import *

root = Tk()

Label(root, text="这是一个标签").pack()
Button(root, text="按钮").pack()
Checkbutton(root, text="多选框").pack()
Entry(root).pack()
Radiobutton(root, text="男", value=1).pack()
Radiobutton(root, text="女", value=2).pack()
Scale(root, orient='horizonta').pack()

root.mainloop()
```

- **Label** 一个标签组件。主要用来实现显示功能，可以显示文字和图片。

  `l = Label(parent, option=value ... )` 参数说明：

  - parent: 代表承载该按钮的父容器.
  - options: 可选项，即该按钮的可设置的属性。这些选项可以用键 =值的形式设置，并以逗号分隔

如下，分别使用了两个标签，一个显示文字，另一个显示了一张位图

```python
from tkinter import *

root = Tk()
Label(root, text="我是标签").pack()
Label(root, bitmap="error").pack()
root.mainloop()
```

![示例](https://typora-1309665611.cos.ap-nanjing.myqcloud.com/typora/20171203231651694.png)

> **关于图片显示** 注意：Python内置了10种位图，可以直接使用，设置bitmap属性即可。 "error" "gray75" "gray50" "gray25" "gray12" "hourglass" "info" "questhead" "question" "warning"

效果 ：![效果](https://typora-1309665611.cos.ap-nanjing.myqcloud.com/typora/20171203231749087.png)

Python 中image属性仅支持gif、pgm、ppm格式，bitmap支持xbm格式。设置方法：

```python
photo = PhotoImage(file="image.gif")
bmp = BitmapImage(file="logo.xbm")
label = Label(root,image = photo)
```

> 注意：image和bitmap参数两者只需设置一个，如果同时设置两个属性，则image 将优先
>
> 如需显示其他格式图片，则需要做一些特别处理，要用到Python的图像处理库——PIL库，但是PIL不支持Python3，且该库过于陈旧，不建议使用，这里可以选择其替代方案，Pillow库，函数使用方法与PIL相同。首先去网上下载并安装Pillow库

使用如下：

```python
from PIL import Image, ImageTk
image = Image.open("F:\\001.jpg")
photo = ImageTk.PhotoImage(image)

#在Label中显示图片
label = Label(root,image = photo)
label.pack()
```

- **Button** 一个简单的按钮，用来响应用户的一个点击操作。能够与一个函数关联，当按钮被按下时，自动调用该函数。它的属性可以直接参考标签，**事实上按钮就是一个特殊的标签，只不过按钮多出了点击响应的功能**

  `b = Button(parent,option=value,... )`

```python
from tkinter import *

def onclick():
    print("点你妹啊 ")

root = Tk()
Button(root, text="按钮", command=onclick).pack()
root.mainloop()
```

- **Checkbutton** 一个多选框组件。主要给用户提供多个选项的选中功能。 `w= Checkbutton(parent，option，...)`

```python
from tkinter import *

def sel():
    val = "Checkbutton value is " + str(v.get())
    print(val)

root = Tk()
v = IntVar()
Checkbutton(root, text="点我啊", variable=v, command=sel).pack()

root.mainloop()
```

| 方法       | 描述                                                         |
| ---------- | ------------------------------------------------------------ |
| deselect() | 清除单选按钮的状态                                           |
| flash()    | 在激活状态颜色和正常颜色之间闪烁几次单选按钮，但保持它开始时的状态。 |
| invoke()   | 可以调用此方法来获得与用户单击单选按钮以更改其状态时发生的操作相同的操作 |
| select()   | 设置单选按钮为选中。                                         |
| toggle()   | 反选。当前被选中，则调用之后变为未选中，反之则为选中。       |

- **Entry** 一个单行文本输入框。可以用来接受用户的输入，但是只能输入一行。如果你只是想显示而不是编辑，那么应该使用标签。

  `w = Entry(parent, option=value ... )`

需要注意一点，Entry与 Lable 和 Button 不同，其text 属性是无效的。那么需要让Entry显示文字改如果操作呢？

```python
from tkinter import *
root = Tk()
e = StringVar()
# 使用textvariable属性，绑定字符串型跟踪变量e
entry = Entry(root,textvariable = e)
e.set('请输入……')
entry.pack()
root.mainloop()
```

![img](https://typora-1309665611.cos.ap-nanjing.myqcloud.com/typora/20171203232438783.png)

当用户在Entry输入密码时，希望输入的密码是不可见的，而不是明文，则可以使用show属性

```python
from tkinter import *
root = Tk()
entry = Entry(root,show="*") 
entry.pack()
root.mainloop()
```

![img](https://typora-1309665611.cos.ap-nanjing.myqcloud.com/typora/20171203232623986.png)

方法列表

| 方法                          | 描述                                                         |
| :---------------------------- | ------------------------------------------------------------ |
| delete ( first, last=None )   | 删除字符的部件，在指标之一，但不包括在最后位置的字符开始。如果第二个参数被忽略，只有在单个字符的位置被删除. |
| get()                         | 返回当前组件的字符串                                         |
| icursor ( index )             | 在给定索引处的字符之前插入光标                               |
| index ( index )               | 移动entry的内容，使得给定索引处的字符是最左边的可见字符。 如果文本在entry中刚好完全显示，则不起作用。 |
| insert ( index, s )           | 将字符串s插入给定索引处的字符之前。                          |
| select_adjust ( index )       | 此方法用于确保选中的部分包含指定索引处的字符。               |
| select_clear()                | 清除选中的。 如果当前没有选中的，则不起作用。                |
| select_from ( index )         | 将ANCHOR索引位置设置为由索引选择的字符位置，并选择该字符。   |
| select_present()              | 如果有选择，则返回true，否则返回false。                      |
| select_range ( start, end )   | 在程序控制下设置选择。 选择从开始索引处开始的文本，但不包括结束索引处的字符。 起始位置必须在结束位置之前。 |
| select_to ( index )           | 选择从ANCHOR位置开始的所有文本，但不包括给定索引处的字符。   |
| xview ( index )               | 此方法在将Entry链接到水平滚动条时非常有用。                  |
| xview_scroll ( number, what ) | 用于水平滚动Entry。 参数必须是UNITS，按字符宽度滚动，或者按页面大小来滚动。 数字是从左到右滚动的正数，负数从右到左滚动。 |

- **Radiobutton** 单选按钮，**即在同一组内只能有一个按钮被选中**，每当选中组内的一个按钮时，其它的按钮自动改为非选中态，与其他控件不同的是，**它有组的概念**。

  `w = Radiobutton(parent, option, ... )`

```python
from tkinter import *

def sel():
   selection = "You selected the option " + str(var.get())
   print(selection)

root = Tk()

#创建整型变量，用于绑定，相同的整型变量是为同一组
var = IntVar()
#pack()是布局的一种方法
#anchor = W 代表方向，West,左对齐其实是
Radiobutton(root, text="Option 1", variable=var, value=1,command=sel).pack( anchor = W )
Radiobutton(root, text="Option 2",variable=var,value=2,command=sel).pack( anchor = W )
Radiobutton(root, text="Option 3", variable=var, value=3,command=sel).pack( anchor = W)

root.mainloop()
```

| 方法       | 描述                                                         |
| ---------- | ------------------------------------------------------------ |
| deselect() | 清除单选按钮的状态                                           |
| flash()    | 在激活状态颜色和正常颜色之间闪烁几次单选按钮，但保持它开始时的状态。 |
| invoke()   | 可以调用此方法来获得与用户单击单选按钮以更改其状态时发生的操作相同的操作 |
| select()   | 设置单选按钮为选中。                                         |

- **Scale** 一个滑块控件。用于在一个范围内，拖动它改变值的大小，例如音量条。

```
from tkinter import *

root = Tk()
v = IntVar()
# from_ : 设置最小值  to：设置最大值
# tickinterval：设置刻度   length：设置滑块的长度，单位为像素
Scale(root, orient='horizonta', variable=v, from_=0, to=200, tickinterval=50, length=200).pack()

root.mainloop()
```

![img](https://typora-1309665611.cos.ap-nanjing.myqcloud.com/typora/Snipaste_2019-04-10_11-02-13.jpg)

### 跟踪控件的值

为了响应特定小控件的值的变化，Tkinter提供了自己的变量类，它们可以用来跟踪这些小控件的值。

```python
# 字符串型
my_string = tk.StringVar()

# 布尔型
ticked_yes = tk.BooleanVar()

# 整型
group_choice = tk.IntVar()

# 浮点型
volume = tk.DoubleVar()

# 将变量类与控件关联
tk.Entry(root, textvariable=my_string)
tk.Checkbutton(root, text="选我", variable=ticked_yes)
tk.Radiobutton(root, text="点我", variable=group_choice) 
tk.Scale(root, label="音量", variable=volume)
```

变量类的操作，使用`set`和`get`方法

```
# 向Entry输入框中设置文本
my_string.set("请输入内容")

# 获取Entry中用户输入的内容
my_string.get()
```

## 2.2 布局详解

### pack 布局

使用 pack布局，将向容器中添加组件，第一个添加的组件在最上方，然后是依次向下添加。当pack布局不设置属性时，它只会占用能容纳下当前组件的最小空间

pack布局区分以下三种空间

- 所属不明的，无人认领的空间
- 要求但未使用的空间
- 要求并已使用的空间

**展开属性`expand`**

“拉手效果布局”

```python
import tkinter as tk

root = tk.Tk()

tk.Button(root, text="A").pack(side=tk.LEFT, expand=1)
tk.Button(root, text="B").pack(side=tk.LEFT, expand=1)
tk.Button(root, text="C").pack(side=tk.LEFT, expand=1)

root.mainloop()
```

综合示例

```python
import tkinter as tk

root = tk.Tk()
frame = tk.Frame(root)

tk.Label(frame, text="Pack 布局的 side 和 fill").pack()
tk.Button(frame, text="A").pack(side=tk.LEFT, fill=tk.Y)
tk.Button(frame, text="B").pack(side=tk.TOP, fill=tk.X)
tk.Button(frame, text="C").pack(side=tk.RIGHT, fill=tk.NONE)
tk.Button(frame, text="D").pack(side=tk.TOP, fill=tk.BOTH)

# 需注意，顶部框架不会展开，也不会填充X或Y方向
frame.pack()

tk.Label(root, text="Pack 布局的 expand").pack()
tk.Button(root, text="我不扩展").pack()
tk.Button(root, text="我不向x方向填充，但我扩展").pack(expand=1)
tk.Button(root, text="我向x方向填充，并且扩展").pack(fill=tk.X, expand=1)

root.mainloop()
```

`expand`和`fill`属性有什么区别？ 相信绝大多数初次学习tkinter的人都会对这两个属性困惑，其实这两个属性是明显不同的，`expand`对应的正是要求但未使用的空间，而`fill`对应的是要求并已使用的空间。fill是填满的意思，将所有要求的空间占满。

#### pack常用属性

| 属性名       | 属性简析                                                     | 取值                                                 | 取值说明                                                     |
| ------------ | ------------------------------------------------------------ | ---------------------------------------------------- | ------------------------------------------------------------ |
| fill         | 设置组件是否向水平或垂直方向填充                             | X、Y、BOTH 和NONE                                    | fill = X（水平方向填充）fill = Y（垂直方向填充）fill = BOTH（水平和垂直）NONE 不填充 |
| expand       | 设置组件是否展开，当值为YES时，side选项无效。组件显示在父容器中心位置；若fill选项为BOTH,则填充父组件的剩余空间。默认为不展开 | YES 、NO（1、0）                                     | expand=YES expand=NO                                         |
| side         | 设置组件的对齐方式                                           | LEFT、TOP、RIGHT、BOTTOM                             | 值为左、上、右、下                                           |
| ipadx、ipady | 设置x方向（或者y方向）内部间隙（子组件之间的间隔）           | 可设置数值，默认是0                                  | 非负整数，单位为像素                                         |
| padx、pady   | 设置x方向（或者y方向）外部间隙（与之并列的组件之间的间隔）   | 可设置数值，默认是0                                  | 非负整数，单位为像素                                         |
| anchor       | 锚选项，当可用空间大于所需求的尺寸时，决定组件被放置于容器的何处 | N、E、S、W、NW、NE、SW、SE、CENTER（默认值为CENTER） | 表示八个方向以及中心                                         |

注意：上表中取值都是常量，YES等价于"yes"，亦可以直接传入字符串值。另外当界面复杂度增加时，要实现某种布局效果，需要分层来实现。

```python
from tkinter import *

root = Tk()

# 使用Frame增加一层容器
fm1 = Frame(root)

Button(fm1, text='Top').pack(side=TOP, anchor=W, fill=X, expand=YES)
Button(fm1, text='Center').pack(side=TOP, anchor=W, fill=X, expand=YES)
Button(fm1, text='Bottom').pack(side=TOP, anchor=W, fill=X, expand=YES)
fm1.pack(side=LEFT, fill=BOTH, expand=YES)

fm2 = Frame(root)
Button(fm2, text='Left').pack(side=LEFT)
Button(fm2, text='This is the Center button').pack(side=LEFT)
Button(fm2, text='Right').pack(side=LEFT)
fm2.pack(side=LEFT, padx=10)


root.mainloop()
```

![img](https://typora-1309665611.cos.ap-nanjing.myqcloud.com/typora/20170102230646911.jpg)

#### pack函数

| 函数名                       | 描述                                                         |
| ---------------------------- | ------------------------------------------------------------ |
| pack_slaves()                | 以列表方式返回本组件的所有子组件对象。                       |
| pack_configure(option=value) | 给pack布局管理器设置属性，使用属性（option）= 取值（value）方式设置 |
| propagate(boolean)           | 设置为True表示父组件的几何大小由子组件决定（默认值），反之则无关。 |
| pack_info()                  | 返回pack提供的选项所对应得值。                               |
| pack_forget()                | Unpack组件，将组件隐藏并且忽略原有设置，对象依旧存在，可以用pack(option, …)，将其显示。 |
| location(x, y)               | x, y为以像素为单位的点，函数返回此点是否在单元格中，在哪个单元格中。返回单元格行列坐标，(-1, -1)表示不在其中 |
| size()                       | 返回组件所包含的单元格，揭示组件大小。                       |

### grid 布局

又被称作网格布局，是最被推荐使用的布局。程序大多数都是矩形的界面，我们可以很容易把它划分为一个几行几列的网格，然后根据行号和列号，将组件放置于网格之中。使用grid 布局时，需要在里面指定两个参数，分别用row 表示行，column 表示列。需要注意的是 row 和 column 的序号都从0 开始，且每个网格只能容纳一个窗口小控件。

网格布局直观感受

```python
from tkinter import *

root = Tk()

Label(root, width=15, height=3, bg="red").grid(row=0, column=0)
Label(root, width=15, height=3, bg="green").grid(row=0, column=1)
Label(root, width=15, height=3, bg="blue").grid(row=0, column=2)
Label(root, width=15, height=3, bg="white").grid(row=1, column=0)
Label(root, width=15, height=3, bg="black").grid(row=1, column=1)
Label(root, width=15, height=3, bg="grey").grid(row=1, column=2)

root.mainloop()
```

使用`grid`布局前，要打好腹稿，将界面划分成网格状

![img](https://typora-1309665611.cos.ap-nanjing.myqcloud.com/typora/20170102230713263.jpg)

**实例**，**一个登录界面**

```python
import tkinter as tk

root = tk.Tk()
tk.Label(root, text="账号").grid(row=0, sticky=tk.W)
tk.Label(root, text="密码").grid(row=1, sticky=tk.W)
tk.Entry(root).grid(row=0, column=1, sticky=tk.E)
tk.Entry(root).grid(row=1, column=1, sticky=tk.E)
tk.Button(root, text="Login").grid(row=2, column=1, sticky=tk.E)
root.mainloop()
```

要注意，每列的宽度（或每行的高度）由网格中小部件的高度或宽度决定。如果需要额外的设置，只能通过设置网格中的小部件的宽度实现。 另外，可以使用`sticky = tk.NSEW`参数使小部件可扩展并填充网格的整个单元格。

> 在tkinter的官方文档中，并没有给出让`grid`布局适配根窗口拉伸的方法，但是通过查阅`tcl/Tk`的文档，可知设置权重能满足该需求。

```python
# 第一个参数是想要设置的列的序号
root.grid_columnconfigure(1, weight=1)

# 用于设置行
# root.grid_rowconfigure(1, weight=1)
```

#### grid属性设置

| 属性名                   | 属性简析                                              | 取值                               | 取值说明                                                     |
| ------------------------ | ----------------------------------------------------- | ---------------------------------- | ------------------------------------------------------------ |
| row、column              | row为行号，column为列号，设置将组件放置于第几行第几列 | 取值为行、列的序号，不是行数与列数 | row 和 column 的序号从0开始，但是，column的默认值是0，row的默认值是下一个编号较大的未占用行号 |
| sticky                   | 设置组件在网格中的对齐方式（前提是有额外的空间）      | N、E、S、W、NW、NE、SW、SE         | 类似于pack布局中的锚选项                                     |
| rowspan                  | 组件所跨越的行数                                      | 默认值为1                          | 取值为跨越占用的行数，而不是序号                             |
| columnspan               | 组件所跨越的列数                                      | 默认值为1                          | 取值为跨越占用的列数，而不是序号                             |
| ipadx、ipady、padx、pady | 组件的内部、外部间隔距离，与pack的该属性用法相同      | 同pack                             | 同pack                                                       |

**关于sticky属性，还有一些组合用法**

将小控件放置在单元格的一角

- `sticky=tk.NE` 右上角
- `sticky=tk.SE` 右下角
- `sticky=tk.SW` 左下角
- `sticky=tk.NW` 左上角

拉伸小控件

- `sticky=tk.N+tk.S` 垂直拉伸小控件，并保持水平居中，其等价于字符串值`"ns"`，以下同
- `sticky=tk.E+tk.W` 水平拉伸且持垂直居中
- `sticky=tk.N+tk.E+tk.S+tk.W` 水平和垂直拉伸，等价于常量`tk.NSEW`和字符串值`nsew`
- `sticky=tk.N+tk.S+tk.W` 将垂直拉伸并向西（左）对齐

#### grid函数

| 函数名                       | 描述                                                         |
| ---------------------------- | ------------------------------------------------------------ |
| grid_slaves()                | 以列表方式返回本组件的所有子组件对象。                       |
| grid_configure(option=value) | 给pack布局管理器设置属性，使用属性（option）= 取值（value）方式设置 |
| grid_propagate(boolean)      | 设置为True表示父组件的几何大小由子组件决定（默认值），反之则无关。 |
| grid_info()                  | 返回pack提供的选项所对应得值。                               |
| grid_forget()                | Unpack组件，将组件隐藏并且忽略原有设置，对象依旧存在，可以用pack(option, …)，将其显示。 |
| grid_location(x, y)          | x, y为以像素为单位的点，函数返回此点是否在单元格中，在哪个单元格中。返回单元格行列坐标，(-1, -1)表示不在其中 |
| size()                       | 返回组件所包含的单元格，揭示组件大小。                       |

`grid`布局配合使用单元格的合并，可以设计出复杂的界面

![img](https://typora-1309665611.cos.ap-nanjing.myqcloud.com/typora/20131119141349265.png)

复杂示例**（查找替换UI示例）**

```python
import tkinter as tk

parent = tk.Tk()
parent.title('Find & Replace')

tk.Label(parent, text="Find:").grid(row=0, column=0, sticky='e')
tk.Entry(parent, width=60).grid(row=0, column=1, padx=2, pady=2, sticky='we', columnspan=9)

tk.Label(parent, text="Replace:").grid(row=1, column=0, sticky='e')
tk.Entry(parent).grid(row=1, column=1, padx=2, pady=2, sticky='we', columnspan=9)

tk.Button(parent, text="Find").grid(row=0, column=10, sticky='e' + 'w', padx=2, pady=2)
tk.Button(parent, text="Find All").grid(row=1, column=10, sticky='e' + 'w', padx=2)
tk.Button(parent, text="Replace").grid(row=2, column=10, sticky='e' + 'w', padx=2)
tk.Button(parent, text="Replace All").grid(row=3, column=10, sticky='e' + 'w', padx=2)

tk.Checkbutton(parent, text='Match whole word only ').grid(row=2, column=1, columnspan=4, sticky='w')
tk.Checkbutton(parent, text='Match Case').grid(row=3, column=1, columnspan=4, sticky='w')
tk.Checkbutton(parent, text='Wrap around').grid(row=4, column=1, columnspan=4, sticky='w')

tk.Label(parent, text="Direction:").grid(row=2, column=6, sticky='w')
tk.Radiobutton(parent, text='Up', value=1).grid(row=3, column=6, columnspan=6, sticky='w')
tk.Radiobutton(parent, text='Down', value=2).grid(row=3, column=7, columnspan=2, sticky='e')

parent.mainloop()
```

### place 布局

> place布局 最简单最灵活的一种布局，使用组件坐标来放置组件的位置。但是不太推荐使用，在不同分辨率下，界面往往有较大差异。

#### place属性设置

| 属性名              | 属性简析                                                     | 取值                          | 取值说明                                                     |
| ------------------- | ------------------------------------------------------------ | ----------------------------- | ------------------------------------------------------------ |
| anchor              | 锚选项，同pack布局                                           | 默认值为 NW                   | 同pack布局                                                   |
| x、y                | 组件左上角的x、y坐标                                         | 整数，默认值0                 | 绝对位置坐标，单位像素                                       |
| relx、rely          | 组件相对于父容器的x、y坐标                                   | 0~1之间浮点数                 | 相对位置，0.0表示左边缘（或上边缘），1.0表示右边缘（或下边缘） |
| width、height       | 组件的宽度、高度                                             | 非负整数                      | 单位像素                                                     |
| relwidth、relheight | 组件相对于父容器的宽度、高度                                 | 0~1之间浮点数                 | 与relx（rely）取值相似                                       |
| bordermode          | 如果设置为INSIDE，组件内部的大小和位置是相对的，不包括边框；如果是OUTSIDE，组件的外部大小是相对的，包括边框 | INSIDE、OUTSIDE(默认值INSIDE) | 可以使用常量INSIDE、OUTSIDE，也可以使用字符串形式"inside"、"outside" |

#### place函数

| 函数名                        | 描述                                                         |
| ----------------------------- | ------------------------------------------------------------ |
| place_slaves()                | 以列表方式返回本组件的所有子组件对象。                       |
| place_configure(option=value) | 给pack布局管理器设置属性，使用属性（option）= 取值（value）方式设置 |
| propagate(boolean)            | 设置为True表示父组件的几何大小由子组件决定（默认值），反之则无关。 |
| place_info()                  | 返回pack提供的选项所对应得值。                               |
| grid_forget()                 | Unpack组件，将组件隐藏并且忽略原有设置，对象依旧存在，可以用pack(option, …)，将其显示。 |
| location(x, y)                | x, y为以像素为单位的点，函数返回此点是否在单元格中，在哪个单元格中。返回单元格行列坐标，(-1, -1)表示不在其中 |
| size()                        | 返回组件所包含的单元格，揭示组件大小。                       |

## 2.3 事件详解

### 添加命令

- 无参数

```python
import tkinter as tk

def callback():
    print("被点击了")

root = tk.Tk()
tk.Button(root, text='单击', command=callback).pack()

root.mainloop()
```

- 有参数

```python
import tkinter as tk

def callback(args):
    print("被点击了", args)

root = tk.Tk()
tk.Button(root, text='单击', command=lambda: callback("按钮")).pack()

root.mainloop()
```

如不想使用`lambda`表达式

```python
import tkinter as tk

class Command:
    def __init__(self, func, *args):
        self.func = func
        self.args = args

    def __call__(self):
        self.func(*self.args)


def callback(args):
    print("被点击了", args)


root = tk.Tk()
tk.Button(root, text='单击', command=Command(callback, "按钮")).pack()

root.mainloop()
```

命令绑定的缺陷：

- 只有`Button`和一小部分控件支持
- 功能单一。命令只能绑定到鼠标左键单击和空格键点击事件，无法实现焦点、鼠标滚轮、快捷键响应等等丰富的交互情况

### 事件与绑定

所谓事件，就是在用户按下一个键或点击鼠标时，应用程序需要做出的反应。简单说就是对外部刺激做出的反应。

当窗口小控件中注册的事件发生时，会回调关联的处理函数，并将事件对象的实例作为参数传递到这个处理函数中。

[事件参数文档](http://arcticfox1919.gitee.io/tkinter-doc/event-handlers.html)

[事件类型文档](http://arcticfox1919.gitee.io/tkinter-doc/event-types.html)

**鼠标事件**

```python
import tkinter as tk

root = tk.Tk()
tk.Label(root, text='单击').pack()


def callback(event):
    print("EventType=", event.type)
    print("Num=", event.num)


frame = tk.Frame(root, bg='khaki', width=100, height=80)
frame.bind("<Button-1>", callback)
frame.pack()

root.mainloop()
```

常用的几个鼠标事件

- `<Button-1>`：鼠标左击事件
- `<Button-2>`：鼠标滚轮点击
- `<Button-3>`：鼠标右击事件
- `<Double-Button-1>`：鼠标左双击事件
- `<Triple-Button-1>`：鼠标左三击事件

**关于事件回调传参** 之前的命令回调我们都是通过`lambda`表达式传参，这里的事件回调也一样，只是稍微有一点区别

```python
# 修改回调函数，添加a、b两个参数
def callback(event, a, b):
    print(a, b)
    print("EventType=", event.type)

# 注册回调时，在lambda表示中需要定义event参数
frame.bind("<Button-1>", lambda event: callback(event, 1, 2))
```

**键盘事件**

[键名文档](http://arcticfox1919.gitee.io/tkinter-doc/key-names.html)

```python
import tkinter as tk

root = tk.Tk()
tk.Label(root, text='按键').pack()


def callback(event):
    print("EventType=", event.type)
    print("keysym=", event.keysym)


frame = tk.Frame(root, bg='khaki', width=100, height=80)
frame.pack()
root.bind("<KeyPress-a>", callback)  # a 键
root.bind("<KeyPress-F1>", callback)  # F1 键
root.bind("<Control-Alt-a>", callback)  # Ctrl + Alt + a 键

root.mainloop()
```

#### 事件属性（Event类）

- `char` 键盘事件，按键的字符
- `delta`鼠标滚动事件，鼠标滚动的距离
- `height`、`width` 仅用于Configure事件,即当控件形状发生变化之后的宽度和高度.相当于SizeChanged事件
- `keycode` 键盘事件，按键码
- `keysym`、 `keysym_num` 按键事件
- `num` 鼠标事件，鼠标按键码，1为左键，2为中建，3为右键
- `serial` 相当于Event的ID
- `state` 用来表示修饰键的状态,即ctrl,shift,alt等修饰键的状态.
- `time` 事件发生的时间
- `type` 事件的类型
- `widget` 事件源控件
- `x`、`y`，`x_root`、`y_root` 鼠标事件中鼠标的位置。`x_root`、·y_root`为绝对坐标，x，y为相对坐标。

#### 绑定级别

事件有三种绑定级别，实际开发中选择合适的一种即可

1. 实例绑定。将事件绑定到一个特定的控件实例上。如上述代码中的鼠标事件绑定到`Frame`实例上

   ```python
   frame.bind("<Button-1>", callback)
   ```

2. 类级绑定。可以将事件绑定到类的所有窗口小控件上。典型使用如下，所有Entry控件都将绑定到事件，该事件将调用名为`paste`的函数，类级绑定须慎用，以免造成不可预知的问题！

   ```python
   my_entry.bind_class（'Entry'，'<Control-V>'，paste）
   ```

3. 应用程序级绑定。只要应用程序的任何一个窗口处于焦点，事件发生时回调函数都会被调用。

   ```python
   root.bind_all（'<F1>'，show_help）
   ```

   只要应用程序处于焦点，按F1键将始终触发 `show_help`函数回调

#### 取消绑定

事件被注册后，是可以取消的，三种级别绑定的取消方法如下

```python
entry.unbind('<Alt-Shift-5>')
root.unbind_all('<F1>')
root.unbind_class('Entry', '<KeyPress-Del>')
```

#### 手动模拟事件

有时候我们需要用代码模拟生成一个事件，发送给监听者，而不是通过操作事件源产生事件

tkinter中所有的`widget`都包含一个公共方法`event_generate`,这个方法就是用来产生相应的事件的

```python
event_generate("<<Copy>>")
```

要想查看这些内置的事件，需要查看`Tk/tcl`的文档，tkinter只是对`Tk/tcl`的封装，因此tkinter的文档并不是非常全面

[Tk 事件文档](https://www.tcl.tk/man/tcl8.7/TkCmd/event.htm)

## 2.4 运用面向对象范式

几乎所有的GUI程序中，都天生的适合运用面向对象思维开发。在GUI程序中使用面向过程的范式，则存在一些缺陷，这也是为什么C语言不适合开发大型GUI程序的原因

- 需要定义大量全局变量
- 需要在调用代码之前定义相关的函数
- 最严重的是代码不可重用

OOP(Object Oriented Programming 面向对象程序设计)实际上是一种代码组织方式，它将焦点转移到我们想要操作的对象上，而不是操纵它们所需的逻辑。这与面向过程编程形成对比，面向过程编程将程序视为一个逻辑过程，它接受输入，处理并产生一些输出。

OOP提供了一些好处，例如数据抽象，封装，继承和多态。此外，OOP为程序提供了清晰的模块化结构。代码修改和维护很容易，因为可以在不修改现有对象的情况下创建新对象。

### 聚合式

通常在Python中写Tkinter界面程序时，很多人会使用这种聚合式的写法，实际上这并不是真正纯粹的面向对象的GUI写法，**但tkinter本身也仅仅是对过程式的`tcl`库的封装**，继承小控件并不能真正去重写控件的表现行为，因此是否继承也显得无关紧要，但是在类似Qt这种库中则不然。

下面提供一个编码示例

```python
import tkinter as tk


class App:
    def __init__(self, root):
        self.root = root
        self.set_window()
        self.create_top()
        self.create_body()
        self.create_bottom()

    # 设置窗口
    def set_window(self):
        self.root.title("测试")
        self.root.resizable(False, False)

    # 创建顶部
    def create_top(self):
        tk.Label(self.root, text="Top").pack()

    # 创建主体
    def create_body(self):
        self.input = tk.StringVar()
        tk.Entry(self.root, textvariable=self.input).pack()

    # 创建底部
    def create_bottom(self):
        tk.Button(self.root, text="Bottom", command=self.onclick).pack()

    # 按钮回调函数
    def onclick(self):
        print(self.input.get())


if __name__ == "__main__":
    root = tk.Tk()
    App(root)
    root.mainloop()
```

### 继承式

上面已经说过了，通过继承不能改变控件的表现行为，但是继承式的写法，仍然会让代码更简洁，逻辑更清晰，在其他的面向对象的GUI库中，这是一种常用的写法。

下面是示例

```python
import tkinter as tk


class App(tk.Tk):
    def __init__(self):
        super().__init__()

        self.set_window()
        self.create_top()
        self.create_body()
        self.create_bottom()

    # 设置窗口
    def set_window(self):
        self.title("测试")
        self.resizable(False, False)

    # 创建顶部
    def create_top(self):
        tk.Label(self, text="Top").pack()

    # 创建主体
    def create_body(self):
        self.input = tk.StringVar()
        tk.Entry(self, textvariable=self.input).pack()

    # 创建底部
    def create_bottom(self):
        tk.Button(self, text="Bottom", command=self.onclick).pack()

    # 按钮回调函数
    def onclick(self):
        print(self.input.get())


if __name__ == "__main__":
    app = App()
    app.mainloop()
```

## 2.5 附录：属性

### 大部分控件共享属性

| 选项(别名)          | 说明                                                         | 单位     | 典型值                     | 没有此属性的控件 |
| ------------------- | ------------------------------------------------------------ | -------- | -------------------------- | ---------------- |
| background(bg)      | 当控件显示时，给出的正常颜色                                 | color    | gray25'、'#ff4400'         |                  |
| borderwidth(bd)     | 设置一个非负值,该值显示画控件外围3D边界的宽度;(特别的由relief选项决定这项决定).控件内部的3D效果也可以使用该值 | pixel    | 3                          |                  |
| cursor              | 指定控件使用的鼠标光标,该值可以是Tkinter接受的任何格式       | cursor   | gumby                      |                  |
| font                | 指定控件内部文本的字体                                       | font     | 'Helvetica'、('Verdana',8) | Canvas           |
| Frame               |                                                              |          |                            |                  |
| Scrollbar           |                                                              |          |                            |                  |
| Toplevel            |                                                              |          |                            |                  |
| foreground(fg)      | 指定控件的前景色                                             | color    | black'、'#ff2244'          | Canvas           |
| Frame               |                                                              |          |                            |                  |
| Scrollbar           |                                                              |          |                            |                  |
| Toplevel            |                                                              |          |                            |                  |
| highlightbackground | 指出经过没有输入焦点的控件加亮区域颜色                       | color    | 'gray30'                   | Menu             |
| highlightcolor      | 指出经过没有输入焦点的控件周围长方区域加亮颜色               | color    | 'royalblue'                | Menu             |
| highlightthickness  | 设置一个非负值,该值指出一个有输入焦点的控件周围加亮方形区域的宽度,该值可以是 Tk_GetCursor接受的任何格式.如果为0,则不画加亮区域 | pixel    | 2.1m                       | Menu             |
| relief              | 指出控件3D效果.可选值为RAISED,SUNKEN,FLAT,RIDGE,SOLID,GROOVE.该值指出控件内部相对于外部的外观样式,比如RAISED意味着控件内部相对于外部突出 | constant | RAISED、GROOVE             |                  |
| takefocus           | 决定窗口在键盘遍历时是否接收焦点(比如Tab,shift-Tab).在设定焦点到一个窗口之前,遍历脚本检查takefocus选项的值,值0意味着键盘遍历时完全跳过,值1意味着只要有输入焦点(它及所有父代都映射过)就接收.空值由脚本自己觉定是否接收,当前的算法是如果窗口被禁止,或者没有键盘捆绑或窗口不可见时,跳过 | boolean  | 1 YES                      |                  |
| width               | 指定一个整数,设置控件宽度,控件字体的平局字符数.如果值小于等于0,控件选择一个能够容纳目前字符的宽度 | integer  | 32                         | Menu             |

### 多控件共享属性

| 选项(别名)         | 说明                                                         | 单位     | 典型值          | 仅此类控件 |
| ------------------ | ------------------------------------------------------------ | -------- | --------------- | ---------- |
| activebackground   | 指定画活动元素的背景颜色.元素(控件或控件的一部分)在鼠标放在其上并按动鼠标按钮引起某些行为的发生时,是活动的.如果严格的Modf一致性请求通过设置tk_strictModf变量完成,该选项将被忽略,正常背景色将被使用.对Windows和Macintosh系统,活动颜色将只有在鼠标按钮1被按过元素时使用 | color    | red'、'#fa07a3' | Button     |
| Checkbutton        |                                                              |          |                 |            |
| Menu               |                                                              |          |                 |            |
| Menubutton         |                                                              |          |                 |            |
| Radiobutton        |                                                              |          |                 |            |
| Scale              |                                                              |          |                 |            |
| Scrollbar          |                                                              |          |                 |            |
| activeforeground   | 指定画活动元素时的前景颜色.参见上面关于活动元素的定义        | color    | 'cadeblue'      | Button     |
| Menu               |                                                              |          |                 |            |
| Checkbutton        |                                                              |          |                 |            |
| Menubutton         |                                                              |          |                 |            |
| Radiobutton        |                                                              |          |                 |            |
| anchor             | 指出控件信息(比如文本或者位图)如何在控件中显示.必须为下面值之一:N,NE,E,SE,S,SW,W,NW或者CENTER.比如NW(NorthWest)指显示信息时使左上角在控件的左上端 | constant |                 | Button     |
| Checkbutton        |                                                              |          |                 |            |
| Label              |                                                              |          |                 |            |
| Message            |                                                              |          |                 |            |
| Menubutton         |                                                              |          |                 |            |
| Radiobutton        |                                                              |          |                 |            |
| bitmap             | 指定一个位图在控件中显示,以Tkinter(Tk_GetBitmap)接受的任何形式.位图显示的精确方式受其他选项如锚或对齐的影响.典型的,如果该选项被指定,它覆盖指定显示控件中文本的其他选;bitmap选项可以重设为空串以使文本能够被显示在控件上.在同时支持位图和图像的控件中,图像通常覆盖位图 | bitmap   |                 | Button     |
| Checkbutton        |                                                              |          |                 |            |
| Label              |                                                              |          |                 |            |
| Menubutton         |                                                              |          |                 |            |
| Radiobutton        |                                                              |          |                 |            |
| command            | 指定一个与控件关联的命令.该命令通常在鼠标离开控件之时被调用,对于单选按钮和多选按钮,tkinter变量(通过变量选项设置)将在命令调用时更新 | command  | function类型    | Button     |
| Checkbutton        |                                                              |          |                 |            |
| Radiobutton        |                                                              |          |                 |            |
| Scale              |                                                              |          |                 |            |
| Scrollbar          |                                                              |          |                 |            |
| disabledforeground | 指定绘画元素时的前景色.如果选项为空串(单色显示器通常这样设置),禁止的元素用通常的前景色画,但是采用点刻法填充模糊化 | color    | 'gray50'        | Button     |
| Checkbutton        |                                                              |          |                 |            |
| Radiobutton        |                                                              |          |                 |            |
| Menu               |                                                              |          |                 |            |
| Menubutton         |                                                              |          |                 |            |
| height             | 指定窗口的高度,采用字体选项中给定字体的字符高度为单位,至少为1 | integer  | 1 4             | Button     |
| Canvas             |                                                              |          |                 |            |
| Frame              |                                                              |          |                 |            |
| Label              |                                                              |          |                 |            |
| Listbox            |                                                              |          |                 |            |
| Checkbutton        |                                                              |          |                 |            |
| Radiobutton        |                                                              |          |                 |            |
| Menubutton         |                                                              |          |                 |            |
| Text               |                                                              |          |                 |            |
| Toplevel           |                                                              |          |                 |            |
| image              | 指定所在控件中显示的图像,必须是用图像create方法产生的.如果图像选项设定,它覆盖已经设置的位图或文本显示;更新恢复位图或文本的显示需要设置图像选项为空串 | image    |                 | Button     |
| Checkbutton        |                                                              |          |                 |            |
| Label              |                                                              |          |                 |            |
| Menubutton         |                                                              |          |                 |            |
| Radiobutton        |                                                              |          |                 |            |
| justify            | 当控件中显示多行文本的时候,该选项设置不同行之间是如何排列的,其值为如下之一:LEFT,CENTER或RIGHT.LEFT指每行向左对齐,CENTER指每行居中对齐,RIGHT指向右对齐 | constant | RIGHT           | Button     |
| Checkbutton        |                                                              |          |                 |            |
| Entry              |                                                              |          |                 |            |
| Label              |                                                              |          |                 |            |
| Menubutton         |                                                              |          |                 |            |
| Message            |                                                              |          |                 |            |
| Radiobutton        |                                                              |          |                 |            |
| padx               | 指定一个非负值设置控件X方向需要的边距.该值为Tkinter(Tk_GetPixels)接受的格式.当计算需要多大的窗口时,控件会把此值加到正常大小之上(由控件中显示内容决定);如果几何管理器能够满足此请求,控件将在左端或右端得到一个给定的多余空边.大部分控件只用此项于文本,如果它们显示位图或图像,通常忽略空边选项 | pixels   | 2m 10           | Button     |
| Checkbutton        |                                                              |          |                 |            |
| Label              |                                                              |          |                 |            |
| Menubutton         |                                                              |          |                 |            |
| Message            |                                                              |          |                 |            |
| Radiobutton        |                                                              |          |                 |            |
| Text               |                                                              |          |                 |            |
| pady               | 指定一个非负值设置控件Y方向需要的边距.该值为Tkinter(Tk_GetPixels)接受的格式.当计算需要多大的窗口时,控件会把此值加到正常大小之上(由控件中显示内容决定);如果几何管理器能够满足此请求,控件将在上端或下端得到一个给定的多余空边.大部分控件只用此项于文本,如果它们显示位 图或图像,通常忽略空边选项 | pixels   | 12 3m           | Button     |
| Checkbutton        |                                                              |          |                 |            |
| Label              |                                                              |          |                 |            |
| Menubutton         |                                                              |          |                 |            |
| Message            |                                                              |          |                 |            |
| Radiobutton        |                                                              |          |                 |            |
| Text               |                                                              |          |                 |            |
| selectbackground   | 指定显示选中项时的背景颜色                                   | color    | 'blue'          | Canvas     |
| Listbox            |                                                              |          |                 |            |
| Entry              |                                                              |          |                 |            |
| Text               |                                                              |          |                 |            |
| selectborderwidth  | 指定一个非负值,给出选中项的三维边界宽度,值可以是任何Tkinter(Tk_GetPixels)接受的格式 | pixel    | 3               | Canvas     |
| Entry              |                                                              |          |                 |            |
| Listbox            |                                                              |          |                 |            |
| Text               |                                                              |          |                 |            |
| selectforeground   | 指定显示选中项的前景颜色                                     | color    | yellow          | Canvas     |
| Entry              |                                                              |          |                 |            |
| Listbox            |                                                              |          |                 |            |
| Text               |                                                              |          |                 |            |
| state              | 指定控件下列两三个状态之一(典型是复选按钮)： NORMAL和DISABLED或NORMAL,ACTIVE和NORMAL.在NORMAL状态,控件有前景色和背景显示;在ACTIVE状态,控件按activeforeground和activebackground选项显示;在DISABLED状态下,控件不敏感,缺省捆绑将拒绝激活控件,并忽略鼠标行为,此时,由disabled foreground和background选项决定如何显示 | constant | ACTIVE          | Button     |
| Checkbutton        |                                                              |          |                 |            |
| Entry              |                                                              |          |                 |            |
| Menubutton         |                                                              |          |                 |            |
| Scale              |                                                              |          |                 |            |
| Radiobutton        |                                                              |          |                 |            |
| Text               |                                                              |          |                 |            |
| text               | 指定控件中显示的文本,文本显示格式由特定控件和其他诸如锚和对齐选项决定 | string   | 'Display'       | Button     |
| Checkbutton        |                                                              |          |                 |            |
| Label              |                                                              |          |                 |            |
| Menubutton         |                                                              |          |                 |            |
| Message            |                                                              |          |                 |            |
| Radiobutton        |                                                              |          |                 |            |
| textvariable       | 指定一个变量名字.变量值被转变为字符串在控件上显示.如果变量值改变,控件将自动更新以反映新值,字符串显示格式由特定控件和其他诸如锚和对齐选项决定 | variable | widgetConstant  | Button     |
| Checkbutton        |                                                              |          |                 |            |
| Entry              |                                                              |          |                 |            |
| Label              |                                                              |          |                 |            |
| Menubutton         |                                                              |          |                 |            |
| Message            |                                                              |          |                 |            |
| Radiobutton        |                                                              |          |                 |            |
| underline          | 指定控件中加入下划线字符的整数索引.此选项完成菜单按钮与菜单输入的键盘遍历缺省捆绑.0对应控件中显示的第一个字符,1对应第二个,以此类推 | integer  | 2               | Button     |
| CheckButton        |                                                              |          |                 |            |
| Label              |                                                              |          |                 |            |
| Menubutton         |                                                              |          |                 |            |
| Radiobutton        |                                                              |          |                 |            |
| wraplength         | 对于能够支持字符换行的控件,该选项指定行的最大字符数,超过最大字符数的行将转到下行显示,这样一行不会超过最大字符数.该值可以是窗口距离的任何标准格式.如果该值小于或等于0,不换行,换行只有在文本中的换行符的地方才出现 | pixel    | 41,65           | Button     |
| Checkbutton        |                                                              |          |                 |            |
| Label              |                                                              |          |                 |            |
| Menubutton         |                                                              |          |                 |            |
| Radiobutton        |                                                              |          |                 |            |
| xscrollcommand     | 指定一个用来与水平滚动框进行信息交流的命令前缀,当控件窗口视图改变(或者别的任何滚动条显示的改变,如控件的总尺寸改变等等),控件将通过把滚动命令和两个数连接起来产生一个命令.两个数分别为0到1之间的分数,代表文档中的一个位置,0表示文档的开头,1.0表示文档的结尾处,0.333表示整个文档的三分之一处,如此等等.第一个分数代表窗口中第一个可见文档信息,第二个分数代表紧跟上一个可见部分之后的信息.然后命令把它们传到Tcl解释器执行.典型的,xscrollcommand选项由滚动条标识跟着set组成,如set.x.scrollbar set将引起滚动条在窗口中视图变化时被更新.如果此项没有指定,不执行命令 | function |                 | Canvas     |
| Entry              |                                                              |          |                 |            |
| Listbox            |                                                              |          |                 |            |
| Text               |                                                              |          |                 |            |
| yscrollcommand     | 指定一个用来与垂直滚动框进行信息交流的命令前缀,当控件窗口视图改变(或者别的任何滚动条显示的改变,如控件的总尺寸改变等等),控件将通过把滚动命令和两个数连接起来产生一个命令.两个数分别为0到1之间的分数,代表文档中的一个位置,0表示文档的开头,1.0表示文档的结尾处,0.333表示整个文档的三分之一处,如此等等.第一个分数代表窗口中第一个可见文档信息,第二个分数代表紧跟上一个可见部分之后的信息.然后命令把它们传到Tcl解释器执行.典型的,yscrollcommand选项由滚动条标识跟着set组成,如set.y.scrollbar set将引起滚动条在窗口中视图变化时被更新.如果此项没有指定,不执行命令 | function |                 | Canvas     |
| Entry              |                                                              |          |                 |            |
| Listbox            |                                                              |          |                 |            |
| Text               |                                                              |          |                 |            |

### Button 控件属性示例

> 以下属性中，许多具有通用性，熟悉之后，其他组件也就掌握了，这里以Button为例，因Button具有代表性

Button常用属性

| 属性             | 取值                                  | 说明                                                         |
| ---------------- | ------------------------------------- | ------------------------------------------------------------ |
| text             | 字符串                                | 按钮的文本内容                                               |
| activebackground |                                       | 当鼠标放上去时，按钮的背景色                                 |
| activeforeground |                                       | 当鼠标放上去时，按钮的前景色                                 |
| bd（bordwidth）  | 单位为像素，默认值为2个像素           | 按钮边框的大小                                               |
| bg（background） |                                       | 按钮的背景色                                                 |
| command          | 函数名的字符串形式                    | 按钮关联的函数，当按钮被点击时，执行该函数                   |
| fg（foreground） |                                       | 按钮的前景色（按钮文本的颜色）                               |
| font             |                                       | 设置字体，还包含样式和大小                                   |
| image            |                                       | 给按钮设置一张图像，必须是用图像create方法产生的             |
| bitmap           |                                       | 指定按钮显示一张位图                                         |
| justify          | LEFT、CENTER、RIGHT                   | 显示多行文本的时候,设置不同行之间的对齐方式                  |
| padx             | 单位像素                              | 按钮在x轴方向上的内边距，是指按钮的内容与按钮边缘的距离      |
| pady             | 单位像素                              | 按钮在y轴方向上的内边距                                      |
| relief           | RAISED,SUNKEN,FLAT,RIDGE,SOLID,GROOVE | 设置控件3D效果                                               |
| state            | DISABLED、ACTIVE、NORMAL              | 设置组件状态。正常(normal)、激活(active)、禁用(disabled)     |
| underline        | 取值为整数，默认值为-1                | 默认按钮上的文本都不带下划线。取值就是带下划线的字符串索引，为0时，第一个字符带下划线，为1时，前两个字符带下划线，以此类推 |
| width            | 单位像素                              | 按钮的宽度，如未设置此项，其大小以适应按钮的内容（文本或图片的大小） |
| height           | 单位像素                              | 按钮的高度，同width属性                                      |
| wraplength       | 取值为整数，默认值0                   | 限制按钮每行显示的字符的数量                                 |
| textvariable     |                                       | 指定一个变量名，变量值被转变为字符串在控件上显示。当变量值改变,控件也将自动更新 |
| anchor           | 取值可参考布局中的锚选项              | 锚选项，控制文本的位置，默认为中心                           |

## 3.1 高级控件学习

| 控件类     | 名称       | 简要说明                                                 |
| ---------- | ---------- | -------------------------------------------------------- |
| LabelFrame | 标签框架   | 带有标签和边框的一个容器，通常用于控件分组               |
| Message    | 消息框     | 类似于标签,但可以自动换行，用于显示多行文本              |
| OptionMenu | 选项菜单   | 即一个下拉菜单                                           |
| Spinbox    | 输入控件   | 与Entry类似，但是可以指定输入范围值                      |
| Menu       | 菜单       | 点下菜单按钮后弹出的一个选项列表,用户可以从中选择        |
| Listbox    | 列表框     | 一个选项列表,用户可以从中选择                            |
| Scrollbar  | 滚动条     | 对其支持的组件(文本域、画布、列表框、文本框)提供滚动功能 |
| Text       | 多行文本框 | 显示多行文本                                             |
| Toplevel   | 顶级窗口   | 它是独立存在的窗口                                       |

- **LabelFrame**
- **Message**
- **OptionMenu**
- **Spinbox**

示例代码

```python
from tkinter import *

content = "汉皇重色思倾国，御宇多年求不得。杨家有女初长成，养在深闺人未识。\
            天生丽质难自弃，一朝选在君王侧。回眸一笑百媚生，六宫粉黛无颜色。"

root = Tk()
root.geometry("300x400")
top = LabelFrame(root, text="这是 Label")
top.pack(padx=8, pady=8)

# 创建一个Label
Label(top, text=content, bg="yellow").pack()

bottom = LabelFrame(root, text="这是 Message")
bottom.pack(padx=8, pady=8)

# 创建一个Message
Message(bottom, text=content, bg="blue").pack()

# 下拉菜单
op_list = ["选项1", "选项2", "选项3"]
val = StringVar()
val.set(op_list[0])
# 注意，传入的列表前需要加一个*号，这是表示不定参的传递，
# 两个*则是表示字典类型的不定参传递
OptionMenu(root, val, *op_list).pack()

# 指定数字范围
var_range = StringVar()
var_range.set(0)
Spinbox(root, textvariable=var_range, from_=-10, to=10).pack()

# 指定列表范围
Spinbox(root, value=op_list).pack()

root.mainloop()
```

- **Menu**

```python
from tkinter import Tk, Menu

root = Tk()

# 创建窗口顶部的菜单栏对象
menu_bar = Menu(root)
# 将菜单栏对象设置给根窗口
root["menu"] = menu_bar  # 等价于 root.config(menu=menu_bar)

# 创建“文件”联级菜单
file_menu = Menu(menu_bar, tearoff=0)
# 在菜单栏上添加菜单标签，并将该标签与相应的联级菜单关联起来
menu_bar.add_cascade(label='文件', menu=file_menu)

# 在文件联级菜单中添加菜单项
file_menu.add_command(label='新建', accelerator='Ctrl+N')
file_menu.add_command(label='打开', accelerator='Ctrl+O')
file_menu.add_command(label='保存', accelerator='Ctrl+S')
# 添加分割线
file_menu.add_separator()
file_menu.add_command(label='退出', accelerator='Alt+F4')

about_menu = Menu(menu_bar, tearoff=0)
menu_bar.add_cascade(label='关于', menu=about_menu)
about_menu.add_command(label='关于')
about_menu.add_command(label='帮助')

root.mainloop()
```

------

参数说明：

- `tearoff`

  菜单项列表中的第一个位置（位置0）会被一个“脱离”元素占用，`tearoff=0`时，菜单将没有脱离功能

- `accelerator`

  在菜单项名称的右侧显示一个快捷键提示。注意，它只是一个提示，快捷键功能需要监听按键来实现。

------

- **Listbox**
- **Scrollbar**

列表框通常用于数据展示或者作为选项菜单使用。滚动条则是一种辅助的小控件，它通常与列表框或者多行文本框结合使用。

列表框简单示例

```python
from tkinter import *

root = Tk()

list_var = StringVar()
list_var.set(["Go", "Python", "Java", "Dart", "JavaScript"])

Listbox(root, listvariable=list_var, selectmode=BROWSE).pack()

root.mainloop()
```

------

参数说明：

- `selectmode`

  设置列表框的选择模式。共有四个值，`SINGLE`表示单选，`BROWSE`也是单选，但该模式可以通过拖动鼠标来单选，而不仅仅只是点击。`MULTIPLE`表示多选，`EXTENDED`则表示可以通过拖动鼠标来多选，当然，也可以配合`Shift`键通过点击来多选。`selectmode`属性默认值是`BROWSE`。

------

结合滚动条示例

```python
from tkinter import *

root = Tk()

list_var = StringVar()
list_var.set(["Go", "Python", "Java", "Dart",
              "JavaScript", "C", "C++", "PHPHPHPHPHPHPHPHPHPHPHP"])

# 分别创建x方向、y方向的两个滚动条。orient属性设置其滚动方向
y_bar = Scrollbar(root, orient=VERTICAL)
x_bar = Scrollbar(root, orient=HORIZONTAL)

# 创建列表框
list_box = Listbox(root, yscrollcommand=y_bar.set,
                   xscrollcommand=x_bar.set,
                   listvariable=list_var, height=5)

y_bar['command'] = list_box.yview
x_bar['command'] = list_box.xview

# 设置布局方位
y_bar.pack(side=RIGHT, fill=Y)
x_bar.pack(side=BOTTOM, fill=X)
list_box.pack(anchor=NW, fill=BOTH, expand=YES)

root.mainloop()
```

------

`Listbox` 参数说明：

- `yscrollcommand`

  列表框纵向滚动时的回调监听，该属性的值是一个回调函数

- `xscrollcommand`

  列表框横向滚动时的回调监听。

`Scrollbar` 参数说明：

- `command`

  滚动条拖动时的回调监听，其属性值是一个回调函数

------

- **Text**

`Text`控件是非常灵活复杂的控件，既可以插入文字，还能插入图片和其他小控件，我们没有必要一次掌握它的全部用法，这里介绍一下基本用法

```python
from tkinter import *

content = "汉皇重色思倾国，御宇多年求不得。杨家有女初长成，养在深闺人未识。" \
          "天生丽质难自弃，一朝选在君王侧。回眸一笑百媚生，六宫粉黛无颜色。"


def touch(event):
    print(text_area.index(CURRENT))
    print(text_area.get(CURRENT, END))


# 清空Text
def clear():
    text_area.delete("1.0", END)

root = Tk()

# 创建垂直滚动条
y_bar = Scrollbar(root, orient=VERTICAL)
y_bar.pack(side=RIGHT, fill=Y)

text_area = Text(root, yscrollcommand=y_bar.set, wrap=WORD)
y_bar["command"] = text_area.yview

text_area.bind("<Motion>", touch)
text_area.pack()

# 插入文本内容
text_area.insert(INSERT, content)
text_area.insert('1.0', "这是一句XXX话")

# 插入图片
photo = PhotoImage(file="img.gif")
text_area.image_create(END, image=photo)

# 插入控件
btn = Button(text_area, text="点我", command=clear)
text_area.window_create(END, window=btn)

root.mainloop()
```

------

**Text的索引**

其索引表示比较复杂，有常量，也有字符串，常用的有如下

- `INSERT` 等价于字符串`"insert"`，表示当前光标的位置
- `CURRENT` 等价于字符串`"current"`，当前鼠标所在的位置
- `END` 等价于字符串`"end"`，表示文本最末的位置
- `line.column` 直接指定行列位置，如`"1.0"`，表示第一行第一列，注意，行号从1开始，列号从0开始。
- `line.end` 指定行末位置，如`"1.end"`，表示第一行结尾的位置

不常用的

- `+ n chars` 如`"1.0+5c"`，表示在第一行第一列的位置向右移动五个字符的位置
- `linestart` 如`"current linestart"`，表示当前光标所在行的行首位置

------

**Mark与Tags的简单用法**

Mark主要用来控制位置，Tags主要用来改变内容的样式

```python
from tkinter import *

content = "汉皇重色思倾国，御宇多年求不得。杨家有女初长成，养在深闺人未识。" \
          "天生丽质难自弃，一朝选在君王侧。回眸一笑百媚生，六宫粉黛无颜色。"


root = Tk()

text_area = Text(root, wrap=WORD)
text_area.pack()

# 插入文本内容
text_area.insert(INSERT, content)

# 创建一个mark
text_area.mark_set('xxx', "1.0")

# 在名为"xxx"的mark处插入文本，第三参数为插入的文本设置一个名为"here_red"的tag
text_area.insert('xxx', "这是一句XXX话", "here_red")

# 设置Tag的样式
text_area.tag_config('here_red', foreground='red')

# 解除mark
text_area.mark_unset("xxx")

# 在指定范围创建一个tag
text_area.tag_add("high_light", "1.50", "1.end")
text_area.tag_config('high_light', background='yellow')

# 在全局删除指定的tag
# text_area.tag_delete("here_red")
# 在指定的范围内删除tag
# text_area.tag_remove("here_red", "1.0", "1.end")

root.mainloop()
```

- **Toplevel**

实际上我们的根窗口就是一个顶级窗口。它是独立存在的一个窗口，当我们需要编写多窗口程序或者自定义对话框时，就需要使用它。

简单示例

```python
from tkinter import *

def onclick():
    window = Toplevel()
    Label(window, text="我是新窗口").pack()

    # 设置它所依托的父窗口
    window.transient(root)
    # 必须调用mainloop，打开一个新窗口后，需要进入新窗口的事件循环
    window.mainloop()

root = Tk()
Button(root, text="打开窗口", command=onclick).pack()

root.mainloop()
```

> 既然根窗口也是一个顶级窗口，那么顶级窗口的属性和方法，根窗口同样具有。

```python
from tkinter import *

def test(window):
    # 让窗口最小化
    window.iconify()
    # 将最小化的窗口显示出来
    # window.deiconify()

    # 销毁窗口
    # window.destroy()
    # 退出mainloop循环
    # window.quit()

def onclick():
    window = Toplevel()
    # 设置窗口出现的位置
    window.geometry("+300+300")
    window.title("子窗口")

    # 该方法传入True时，去除窗口边框
    # window.overrideredirect(True)
    Button(window, text="点你妹", command=lambda: test(window)).pack()

    # 设置所依托的父窗口
    # window.transient(root)
    # 必须要加上此行，打开一个新窗口后，必须进入新窗口的事件循环
    window.mainloop()

root = Tk()

# 设置窗口标题
root.title("主窗口")

# 设置窗口的宽高与显示的位置
root.geometry("300x200+200+200")

# 固定窗口的长宽，不可改变窗口大小(width=None, height=None)
root.resizable(False, False)

# 设置窗口小图标(必须位于geometry与resizable方法之后)
root.iconbitmap("tools.ico")

Button(root, text="打开窗口", command=onclick).pack()

root.mainloop()
```

------

**关于`geometry`的参数设置**

该方法需要传入一个固定格式的字符串，格式：`"wxh±x±y"`

- 其中`w`、`h`表示窗口的宽和高
- `x`、`y`表示窗口显示位置的横向和纵向坐标
- `+`、`-`则表示正方向还是负方向，基于屏幕左上角为坐标原点，向下或向右为正方向。

------

**扩展**

窗口居中的方法

```python
from tkinter import *

root = Tk()

# 获取当前根窗口的宽、高
cur_width = root.winfo_width()
cur_height = root.winfo_height()

# 获取电脑屏幕的宽、高
scn_width, scn_height = root.maxsize()

# 窗口显示的坐标拼接成固定格式字符串
tmpcnf = '+%d+%d' % ((scn_width-cur_width)/2, (scn_height-cur_height)/2)

root.geometry(tmpcnf)

# 固定窗口的长宽，不可改变窗口大小(width=None, height=None)
root.resizable(False, False)

Label(root, text="我是标签", bg="yellow").pack(side=LEFT)
Button(root, text="这是按钮").pack(side=LEFT)

root.mainloop()
```

**注意，当窗口大小不固定时，是通过动态获取根窗口的宽高来计算位置，如果窗口的宽高一开始就是确定的，请使用确定值，尽量避免动态获取窗口的大小，以免影响GUI的流畅。**

## 3.2 对话框

> tkinter中共提供了三种标准对话框

- `messagebox`
- `filedialog`
- `colorchooser`

### messagebox

> 消息对话框

```python
from tkinter import *
from tkinter import messagebox

root = Tk()

# 设置窗口标题
root.title("主窗口")

# parent指定依托的父窗口，若不指定，默认为根窗口
result = messagebox.askokcancel("标题", "这是内容", parent=root)
print(result)

messagebox.askquestion("标题", "这是question窗口")
messagebox.askretrycancel("标题", "这是retry cancel窗口")
messagebox.showerror("标题", "这是error窗口")
messagebox.showinfo("标题", "这是info窗口")
messagebox.showwarning("标题", "这是warning窗口")

root.mainloop()
```

### filedialog

> 文件对话框

```python
from tkinter import *
from tkinter import filedialog


def onclick():
    file_name = filedialog.askopenfilename(
        title="打开我的文件", initialdir="D:\\",
        filetypes=[("PNG", ".png"), ("文本文档", ".txt")])
    print(file_name)

def save_file():
    file_name = filedialog.asksaveasfilename(
        title="保存文件", initialdir="D:\\")
    print(file_name)


root = Tk()

Button(root, text="浏览", command=onclick).pack()
Button(root, text="保存", command=save_file).pack()

root.mainloop()
```

除上述对话框外，还有一个选择文件夹对话框，这个在tkinter文档中没有写，但是通过查看源码可以找到

```python
from tkinter import *
from tkinter import filedialog

def onclick():
    # 选择文件夹对话框
    file_name = filedialog.askdirectory(initialdir="D:\\")
    print(file_name)

root = Tk()

Button(root, text="浏览", command=onclick).pack()

root.mainloop()
```

------

参数说明：

- `title`

  设置文件对话框的标题

- `initialdir`

  设置默认打开的路径

- `filetypes`

  文件类型筛选。它的值是一个列表，列表中的元素必须是一个二元元组。元组的第一个元素是类型名称，第二个是类型后缀名。

------

### colorchooser

> 颜色选择对话框

```python
from tkinter import *
from tkinter import colorchooser


def onclick():
    file_name = colorchooser.askcolor()

    # 返回值是一个元组，第一个元素是RGB色值元组，第二个是对应的16进制色值
    print(file_name)

root = Tk()

Button(root, text="选色", command=onclick).pack()

root.mainloop()
```

## 3.3 现代风格：TTK

> `ttk` 是Tk 8.5版本开始加入的模块。在之前，我们学习的小控件外观看起来都很陈旧过时，编写的界面会比较丑陋。而`ttk`模块的出现正是为了解决这个问题，它使小控件的外观更接近于系统平台所特定的外观，不仅如此，它还能支持主题的定制，使我们能更简便的改进界面的美观程度。

### TTK的使用

如果是使用`from tkinter import *`方式导包，则只需在其下增加`from tkinter.ttk import *`即可应用ttk风格。使用`ttk`模块后，小控件外观会产生差别。

```python
from tkinter import *
# 增加如下导包语句即可
from tkinter.ttk import *

root = Tk()
root.geometry("300x300")

top = LabelFrame(root, text="Label")
top.pack(padx=8, pady=8)
Label(top, text="我是标签，哈哈").pack()

body = LabelFrame(root, text="Button")
body.pack(padx=8, pady=8)
Button(body, text="你点啊").pack()

bottom = LabelFrame(root, text="其他")
bottom.pack(padx=8, pady=8)
Checkbutton(bottom, text="唱歌").pack()
Checkbutton(bottom, text="跳舞").pack()
Checkbutton(bottom, text="健身").pack()

Scale(bottom, orient='horizonta', from_=0, to=100).pack()

root.mainloop()
```

如使用其他方式导包，则需指定`ttk`模块控件

```python
import tkinter as tk
import tkinter.ttk as ttk

root = tk.Tk()

ttk.Label(root, text="标签").pack()
ttk.Button(root, text="点啊").pack()

root.mainloop()
```

`ttk`仅支持11个原核心控件

- Button
- Checkbutton
- Entry
- Frame
- Label
- LabelFrame
- Menubutton
- PanedWindow
- Radiobutton
- Scale
- Scrollbar

### TTK 新增控件

`ttk` 新增了6个控件，这里我们主要介绍4个重要的

- **Combobox** 输入框下拉选项菜单
- **Progressbar** 进度条控件

```python
import tkinter as tk
import tkinter.ttk as ttk

root = tk.Tk()
ttk.Label(root, text="编程语言").pack(side=tk.LEFT, padx=5, pady=5)

combo = ttk.Combobox(root, values=["Go", "Python", "Java", "C++"])
# 设置当前选中的项
combo.current(1)
combo.pack(side=tk.LEFT, padx=5, pady=5)

# 创建进度条控件
progress = ttk.Progressbar(root, mode='indeterminate', length=100)
progress.pack(pady=10, padx=10)

# 启动进度条控件
progress.start()

progress2 = ttk.Progressbar(root, mode='determinate', length=100)
progress2.pack(pady=10, padx=10)
progress2.start()

root.mainloop()
```

------

`Progressbar` 参数说明：

- `mode`

  有两个值可选。`"indeterminate"`表示来回反弹样式，`"determinate"`表示步进样式

------

- **Notebook** 选项卡控件

```python
import tkinter as tk
from tkinter.ttk import *

root = tk.Tk()
root.geometry("300x300")

notebook = Notebook(root)

page1 = tk.Frame(notebook, background="yellow")
Label(page1, text="这是 tab1 的界面").pack()


page2 = tk.Frame(notebook,  background="pink")
Label(page2, text="这是 tab2 的界面").pack()


notebook.add(page1, text="Tab1")
notebook.add(page2, text="Tab2")
notebook.pack(fill=tk.BOTH, expand="yes")

root.mainloop()
```

- **Treeview** 树形控件

树形结构简单示例

```python
import tkinter as tk
from tkinter import ttk


def item_select(event):
    for select in tree.selection():
        print(tree.item(select, "text"))

root = tk.Tk()
tree = ttk.Treeview(root, show='tree')

# 监听tree中item被选中的事件
tree.bind("<<TreeviewSelect>>", item_select)

# 第一个参数为父节点, 第二个为此项在父节点中的位置（父节点为空时，默认为根节点）
item1 = tree.insert("", 0, text="广东省")

# 在第一个节点中插入如下子节点
tree.insert(item1, 0, text="广州市")
tree.insert(item1, 1, text="深圳市")

item2 = tree.insert("", 1, text="湖北省")
tree.insert(item2, 0, text="武汉市")

tree.pack()
root.mainloop()
```

用 `Treeview` 制作表格

```python
import tkinter as tk
from tkinter import ttk


def item_select(event):
    for select in tree.selection():
        print(tree.item(select, "values"))


def head_onclick(type):
    print(type)

root = tk.Tk()

# show用于禁止列顶部标签。columns用于设置每一列的列标识字符串
tree = ttk.Treeview(root, show='headings', columns=['0', '1', '2'])

# 监听tree中item被选中的事件
tree.bind("<<TreeviewSelect>>", item_select)

# 设置表头名称
tree.heading(0, text='序号', command=lambda: head_onclick('序号'))
tree.heading(1, text='姓名', command=lambda: head_onclick('姓名'))
tree.heading(2, text='年龄', command=lambda: head_onclick('年龄'))

# 设置每列中元素的样式
tree.column(0, anchor='center')
tree.column(1, anchor='center')
tree.column(2, anchor='center')

# "end" 表示往父节点的最后一个位置插入
item1 = tree.insert("", "end", values=("1", "赵二", "19"))
item1 = tree.insert("", "end", values=("2", "张三", "20"))
item1 = tree.insert("", "end", values=("3", "李四", "22"))
item1 = tree.insert("", "end", values=("4", "王五", "18"))

tree.pack()
root.mainloop()
```

------

`Treeview` 参数说明：

- `show`

  用于禁止列顶部标签。有两个值，`'tree'`表示禁止每一列的顶部标签栏，`'headings'`表示禁止首列显示。

------

### 设置主题与样式

> 在使用ttk控件时，会发现它的控件不支持 `bg`、`fg`、`border` 这样涉及样式的属性，这是因为它对外观样式进行了重新定义。

`ttk` 对外观样式的抽象共有三个级别

- 主题
- 样式
- 状态样式

**主题的查询与切换**

```python
from tkinter import ttk

style = ttk.Style()
# 获取所有支持的主题
print(style.theme_names())

# 获取当前使用的主题
print(style.theme_use())

# 切换主题
style.theme_use("classic")
```

**样式与控件状态样式的定制**

在`ttk`中，控件实际上是一个字符串，要改变控件样式，需要指定这个字符串名称，而不是类名，它们的对应关系如下

| 类名        | 控件样式名                                     |
| :---------- | :--------------------------------------------- |
| Button      | TButton                                        |
| Checkbutton | TCheckbutton                                   |
| Combobox    | TCombobox                                      |
| Entry       | TEntry                                         |
| Frame       | TFrame                                         |
| Label       | TLabel                                         |
| LabelFrame  | TLabelFrame                                    |
| Menubutton  | TMenubutton                                    |
| Notebook    | TNotebook                                      |
| PanedWindow | TPanedwindow                                   |
| Progressbar | Horizontal.TProgressbar或Vertical.TProgressbar |
| Radiobutton | TRadiobutton                                   |
| Scale       | Horizontal.TScale 或 Vertical.TScale           |
| Scrollbar   | Horizontal.TScrollbar 或Vertical.TScrollbar    |
| Separator   | TSeparator                                     |
| Sizegrip    | TSizegrip                                      |
| Treeview    | Treeview                                       |

需要注意，在创建新样式时，应当定义`newName.oldName`形式的名称

```python
from tkinter import Tk
from tkinter import ttk

root = Tk()

style = ttk.Style()

# 定义一个全局样式作为默认样式（"."表示此样式将应用于顶级窗口及其所有子元素）
style.configure('.', font='Arial 14', foreground='brown', background='yellow')

# 未指定样式时，使用全局默认样式
ttk.Label(root, text='我没有指定样式').pack()

# 定义一个名为danger的新样式（newName.oldName格式）
style.configure('danger.TButton', font='Times 12', foreground='red', padding=1)
ttk.Button(root, text='我使用danger样式',  style='danger.TButton').pack()

# 为小控件的不同状态指定样式
style.map("new_state_style.TButton", foreground=[('pressed', 'red'), ('active', 'blue')])
ttk.Button(text="不同状态不同样式", style="new_state_style.TButton").pack()

# 覆盖Entry的当前主题（即使没有指定样式，也会受到主题更改的影响）
current_theme = style.theme_use()
style.theme_settings(current_theme,
                     {"TEntry": {
                         "configure": {"padding": 10},
                         "map": {"foreground": [("focus", "red")]}}})


ttk.Entry().pack()

root.mainloop()
```

## 3.4 tkinter扩展包

### Pmw

> [Pmw 在线文档](http://pmw.sourceforge.net/doc/index.html)

一个使用Tkinter模块在Python中构建高级复合小控件的扩展包。它是一个第三方包，因此使用前需要安装。

推荐的安装方式

```shell
python -m pip install pmw
```

**查看离线文档和示例**

安装完成后，进入你的Python环境的根目录，即 `python.exe` 所在的目录

在根目录下，进入如下路径 `Lib\site-packages\Pmw` ，即打开`Pmw`包的所在文件夹。在该文件夹下，再次进入`Pmw_2_0_1`目录，如你的环境下与之不同，则进入`Pmw_`后接版本号的目录，这个下面有两个需要关注的目录

- `doc`目录 离线文档所在目录，找到`starting.html`打开查看文档
- `demos`目录 所有示例所在目录，运行其下的`All.py`，即可看到其支持的控件外观和使用方法。

注意，`Pmw`包长期没有维护与更新，其下的小部分控件可能在Python环境下无法使用，因此挑选合适的有必要的使用，例如：`Balloon`等几个，其他的实用性不强。

`Balloon` 简单示例

```python
from tkinter import *
import Pmw

root = Tk()
root.geometry("300x300")

lab = Label(root, text="别点我")
lab.pack()

balloon = Pmw.Balloon(root)
balloon.bind(lab, '指你妹啊')

root.mainloop()
```

## 3.5 自定义控件

> `ttk`中虽然添加了Notebook，但其功能过于简单，无法支持双击创建选项卡，删除选项卡等功能，这里我们自定义一个tabview，从而学习一下如何在tkinter中自定义控件

![在这里插入图片描述](https://typora-1309665611.cos.ap-nanjing.myqcloud.com/typora/20190409151144412.gif)

[源码地址](https://github.com/arcticfox1919/tkinter-tabview)

示例

```python
import tkinter as tk
from tkinter import messagebox
from tabview import TabView

# 在body中生成widget的函数，返回的widget将被添加到tabview的body中
def create_body():
    global body
    return tk.Label(body, text="this is body")

# 点击选项卡时的回调
def select(index):
    print("current selected -->", index)

# 删除选项卡时的回调，如果返回False将不会删除
def remove(index):
    print("remove tab -->", index)
    if messagebox.askokcancel("标题", "确定要关闭该选项卡吗？"):
        return True
    else:
        return False

# ----------------------- 使用示例 ----------------------------
root = tk.Tk()
root.geometry("640x300")

tab_view = TabView(root, generate_body=create_body,
                   select_listen=select, remove_listen=remove)

body = tab_view.body

label_1 = tk.Label(tab_view.body, text="this is tab1")
label_2 = tk.Label(tab_view.body, text="this is tab2")

# 第一个参数是向body中添加的widget, 第二个参数是tab标题
tab_view.add_tab(label_1, "tabs1")
tab_view.add_tab(label_2, "tabs2")

# TabView需要向x、y方向填充，且expand应设置为yes
tab_view.pack(fill="both", expand='yes', pady=2)

root.mainloop()
```