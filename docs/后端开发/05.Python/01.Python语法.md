---
title: Python基础语法
date: 2024-04-22
categories: 
  - 后端开发
  - python
---

## 数据类型

**字面量**

比如123,"123"。字面量是常量，不可改变

### 值类型

python中一切类型都是引用类型。

| 类型               | 描述                                                      | 说明                                                     |
| ------------------ | --------------------------------------------------------- | -------------------------------------------------------- |
| 数字（Number）     | 支持整数（int）浮点数（float）复数（complex）布尔（bool） | 注意数字包括了，整数浮点数，布尔值。也就是他们是一个类型 |
| 字符串（String）   | 描述文本的一种数据类型                                    | 字符串（string）由任意数量的字符组成                     |
| 列表（List）       | 有序的可变序列                                            | Python中使用最频繁的数据类型，可有序记录一堆数据         |
| 元组（Tuple）      | 有序的不可变序列                                          | 可有序记录一堆不可变的Python数据集合                     |
| 集合（Set）        | 无序不重复集合                                            | 可无序记录一堆不重复的Python数据集合                     |
| 字典（Dictionary） | 无序Key-Value集合                                         | 可无序记录一堆Key-Value型的Python数据集合                |

## 变量

Python的动态类型系统**允许变量在不同时间指向不同类型的对象**。

所以注意变量是没有类型的，可以看做一个指向数据的引用/指针，有类型的是数据。

**所以变量可以指向不同类型的数据**

```
 x   =  123    #x没有类型，   123是整数类型
 x  =  "123"   #x没有类型   "123"是字符串类型
```

### 命名规范

标识符命名中，只允许出现：

英文 中文 数字 下划线（_）

## 类型转换

- `type()`.type(x)可以查看x指向的**数据的类型**

```
x = 123
type(x)  #int
```

我们通过一些函数可以实现类型转换。

| 函数     | **说明**              |
| -------- | --------------------- |
| int(x)   | 将x转换为一个整数     |
| float(x) | 将x转换为一个浮点数   |
| str(x)   | 将对象 x 转换为字符串 |

注意：

- 任何类型，都可以通过`str()`转换成字符串类型
- 但是`int(x),float(x)`需要x真的是数字才能转换
  - 比如`int(kkk)`是不行的，会报错
- 浮点数转整数，**直接丢弃小数部分**

## 运算符

下面只举python特殊的

| 运算符 | 描述   | 实例            |
| ------ | ------ | --------------- |
| /      | 除     | 这是带浮点数的  |
| //     | 下取整 | 相当于int型除法 |
| **     | 指数   | 2**3=8          |

注意：

- python没有`++`，`--`运算符。只能使用`+=1`，`-=1`这样

## 字符串

不管是单引号`''`还是双引号`""`，都认为是字符串

```python
name =  'x'
name = "xxx"  #都是字符串
```

### 字符串操作

首先注意，字符串只能和字符串一起操作，比如"xxx"和"yyy"

但是  "xxx"和123不能一起操作

- 拼接。字符串支持+来连接两个字符串

  - ```python
    str1 = "Hello"
    str2 = "World"
    result = str1 + str2
    print(result)  # 输出 "HelloWorld"
    
    ```

- 重复。使用 `*` 运算符可以将一个字符串重复多次。

  - ```python
    str1 = "Hello"
    result = str1 * 3
    print(result)  # 输出 "HelloHelloHello"
    ```

- **索引**：可以通过索引访问字符串中的单个字符，索引从 0 开始。

  - ```python
    pythonCopy codemy_string = "Python"
    print(my_string[0])  # 输出 'P'
    print(my_string[3])  # 输出 'h'
    ```

- **切片**：可以通过切片操作获取字符串的子串。

  - ```python
    pythonCopy codemy_string = "Python"
    print(my_string[1:4])  # 输出 "yth"
    ```

- **成员检查**：可以使用 `in` 或 `not in` 运算符检查一个字符串是否包含某个子串。

  - ```python
    pythonCopy codemy_string = "Python"
    print("th" in my_string)  # 输出 True
    print("abc" not in my_string)  # 输出 True
    ```

## 判断语句

python的判断语句有点特殊，主要有两种

如果只有一个判断，那么是，if和else

如果有多个判断，那么是 `if-elif-else`，使用`elif`来写多个判断（而不是else if）

## 循环语句

- while循环。注意判断条件不加括号

```python
i =0
while i<100:
    i+=1
```

- for 循环 。  for .. in  **可迭代对象**
- 这个可迭代对象有很多，list ， 字符串 ，或者`range(n)`等等等都可以

```python
name="1234"
for i in name:
    print(i)
```

## 函数

### 函数定义

函数格式如下

```python
def 函数名(参数1，参数2，参数3):
	函数体
	return 返回值
```

注意:

- 没有返回值，可以省略return 语句
- 没有入参，参数可以空着

### 局部变量和全局变量

写在函数里面的就是局部变量（除非加上global关键字）

```python
dfs testA():
    num = 100#局部变量
    print(num)
testA()
x=1  #全局变量
```

## 数据容器

Python中的数据容器：一种可以容纳多份数据的数据类型，容纳的每一份数据称之为1个元素每一个元素，可以是任意类型的数据，如字符串、数字、布尔等。

数据容器根据特点的不同，

- 是否支持重复元素
- 是否可以修改
- 是否有序

等分为5类，分别是：列表（list）、元组（tuple）、字符串（str）、集合（set）、字典（dict）

### 通用方法

| 方法名                                    | 描述                                                     |
| ----------------------------------------- | -------------------------------------------------------- |
| min(iterable)                             | 返回可迭代对象中的最小值                                 |
| sum(iterable)                             | 返回可迭代对象中的和                                     |
| abs()                                     | 返回一个数的绝对值                                       |
| sorted(iterable, key=None, reverse=False) | **返回一个排序好的列表，不管之前是什么容器，都返回列表** |
| type()                                    | 返回一个对象的类型。                                     |
| range()                                   | 生成一个数字序列。注意是左闭右开的                       |
| enumerate()                               | 返回可迭代对象的索引和值。(index,value)                  |
| zip()                                     | 将多个可迭代对象打包成元组的列表。                       |
| list()                                    | 转换为列表                                               |
| tuple()                                   | 转换为元组                                               |
| str()                                     | 转换为字符串                                             |
| set()                                     | 转换为集合                                               |

举例

`enumerate()`

```python
letters = ['a', 'b', 'c', 'd']
for index, letter in enumerate(letters):
    print(index, letter)
```

`zip()`

```python
letters = ['a', 'b', 'c']
numbers = [1, 2, 3]
zipped = zip(letters, numbers)
print(list(zipped))  # 输出 [('a', 1), ('b', 2), ('c', 3)]

```





### 列表list

- 以[]作为标识
- 列表内每一个元素用`,`隔开
- `list()/[]`可以创建一个空列表
- **一个列表里面，支持存储不同数据类型，也支持嵌套（元素也是列表）**

列表**特点总结（！！！）**

- 可以容纳不同类型的元素（混装）
  - 允许元素可变
- 数据是**有序存储**的（有下标序号），
- **允许重复**数据存在
- **可以修改**（增加或删除元素等）
- **可以迭代**

定义:

```python
#字面量
[e1,e2,e3.....]
#定义变量
nums = [e1,e2,e3,....]
#定义空列表
nums = []
nums = list()
```

#### 索引

列表的所有有正向索引和反向索引

正向索引，从0（第一个元素）开始,  取值区间是`[0,n-1]`

<img src="https://typora-1309665611.cos.ap-nanjing.myqcloud.com/typora/image-20240422164402173.png" alt="image-20240422164402173" style="zoom:80%;" />

反向索引，从-1（倒数第一个元素）开始 , 取值区间是`[-n,-1]`

<img src="https://typora-1309665611.cos.ap-nanjing.myqcloud.com/typora/image-20240422164415528.png" alt="image-20240422164415528" style="zoom:80%;" />

**嵌套列表的下标**

列表支持嵌套，所以这里就像二维数组一样，嵌套的列表也支持索引

![image-20240422165304543](https://typora-1309665611.cos.ap-nanjing.myqcloud.com/typora/image-20240422165304543.png)

```python
#2层嵌套list
nums = [[1,2,3],[4,5,6]]
#获取内层第一个list
print(nums[0])
#获取内存第一个list的第一个元素
preint(nums[0][0])
```

#### 常用方法

>https://blog.csdn.net/2301_77000936/article/details/134350393

| 方法                             | 作用                                                         |
| -------------------------------- | ------------------------------------------------------------ |
| append(obj)                      | 在列表末尾添加一个元素                                       |
| extend(iterable)                 | 在列表末尾添加一个可迭代的对象中的所有元素。                 |
| insert(i, obj)                   | 在列表的 i 位置插入一个元素。                                |
| remove(obj)                      | 移除列表中第一个匹配 obj 的元素。(从前往后)                  |
| pop (index)                      | 移除并返回列表中指定位置index的元素。如果不指定位置，默认为移除并返回最后一个元素。 |
| clear()                          | 移除列表中的所有元素                                         |
| index(obj)                       | 返回列表中第一个匹配 obj 的索引。                            |
| count(obj)                       | 返回列表中 obj 出现的次数。                                  |
| sort(*, key=None, reverse=False) | 对列表进行排序。注意**直接修改列表本身**                     |
| reverse()                        | 将列表中的元素反转                                           |
| copy()                           | 返回列表的一个**副本，是浅拷贝**，相当于只是复制了一个引用   |

**上述方法都是直接修改列表本身**

举例

**添加元素**

```python
nums=[1,2,3,4]
nums.extend([4,5])
print(nums) #[1,2,3,4,4,5]
nums.append(6) #[1,2,3,4,4,5,6]
```

### 元组tuple()

列表是可以**修改**的，但是我们有时候希望不被修改，那么就引入了tuple这种不能被修改的容器。

**元组一旦定义完成，就不可修改**

> 除了不能修改，和列表差不多

特点：

- 支持装不同类型元素（混装）
  - 但是元素必须是不可变的（元组，字符串，集合等），列表和字典就是可变的。
- 可重复
- 有序
- 不可修改
- **可以迭代**

#### **定义：**

定义元组使用小括号`()`，或者`tuple()`。元素间使用逗号隔开

Tips:

只有一个元素的元组也要**加逗号**，才能表示元组

```python
#空元组
nums = tuple()
nums = ()

#一个元素的元组 ，注意逗号要加上
nums= (1,)  

```

#### 常用方法

因为不能修改，所有api也少了很多

| **方法**  | **作用**                                           |
| --------- | -------------------------------------------------- |
| index()   | 查找某个数据，如果数据存在返回对应的下标，否则报错 |
| count()   | 统计某个数据在当前元组出现的次数                   |
| len(元组) | 统计元组内的元素个数                               |

### 字符串

字符串是什么容器？是字符的容器。

![image-20240422193908659](https://typora-1309665611.cos.ap-nanjing.myqcloud.com/typora/image-20240422193908659.png)

特点

- **不能修改，和元组一样**
  - 不能添加，删除元素
- **只能存储字符**
- 可以重复，
- 有序
- **可以迭代**

**常用方法**

| 方法名              | 说明                                                         |
| ------------------- | ------------------------------------------------------------ |
| [index]             | 根据下标索引取出特定位置字符                                 |
| index(substring ）  | 查找给定字符的**第一个匹配项的下标**                         |
| replace(str1, str2) | 将字符串内的全部str1，替换为str2.不会修改原字符串，**返回一个新的字符串** |
| .split(str )        | 按照str，对字符串进行分隔不会修改原字符串，而是**得到一个新的列表** |
| .strip(str )        | 移除字符串首尾的str  ，如果不指定str，直接strip()是去除首尾空格。不会修改原字符串，**返回一个新的字符串** |
| .count(str)         | 统计字符串str的出现次数                                      |
| len(str)            | 统计字符串的字符个数                                         |

### 序列的切片

序列是指：内容**连续、有序，可使用下标索引**的一类数据容器。

所以**列表，元组，字符串都属于序列**

<img src="https://typora-1309665611.cos.ap-nanjing.myqcloud.com/typora/image-20240422195924336.png" alt="image-20240422195924336" style="zoom:80%;" />

序列支持切片，即：列表、元组、字符串，均支持进行切片操作

切片：从一个序列中，取出一个子序列

切片格式:  num[start,end,step ] ，注意这是左闭右开即$[start,end)$​。

> 参考：https://flokken.github.io/pages/7c6019/#%E8%B6%85%E5%87%BA%E6%9C%89%E6%95%88%E7%B4%A2%E5%BC%95%E8%8C%83%E5%9B%B4

注意：

- 切片不会影响原序列，**只会返回一个新的序列**

**缺省情况：**

`start`，`end`以`step`。都是可以缺省的，在缺省的情况下，Python的行为是**尽可能取最大区间**，具体来说：

> ！！！按照扩充索引范围的观点，`start`的缺省值是**无穷小()**，`end`的缺省值是**无穷大()**。
>
> 因此[:-1]和[:]结果不一样,因为正反不一样

- start缺省时无穷小，表示从头开始
- end是无穷大，表示从尾开始
- step缺省，那么step=1
  - 如果step<0，表示倒序
  - step>0，表示正序

举例

```python
nums = "12345"
print(nums[::-1])  #54321
nums = [1,2,3,4,5]
preint(nums[3:1:-1])#从3开始到1，步长-1（倒序）
```

### 集合

序列中的元素可以重复，那么我们需要无重复的集合怎么办？所以引入集合

特点：

- 无序
  - 不支持下标
- 不能重复
- **可以修改**
- 支持保持多种类型元素（混装）
  - 但是元素必须是不可变的（元组，字符串，集合等），列表和字典就是可变的

#### 定义

集合可以通过`{}`或者`set()`来创建

举例

```python
#集合字面量
{e1,e2,e3...}
#定义集合变量
x= {e1,e2,e3...}
#定义空集合
x= set()   
x={}
```

#### 常用方法

| add(e )                  | 集合内添加一个元素                                        |
| ------------------------ | --------------------------------------------------------- |
| remove(e )               | 移除集合内指定的元素                                      |
| pop()                    | 从集合中随机取出一个元素                                  |
| clear()                  | 将集合清空                                                |
| difference(  Set2 )      | 得到一个新集合，内含2个集合的差集。原有的2个集合内容不变  |
| difference_update(Set2 ) | 在集合1中，删除集合2中存在的元素集合1被修改，集合2不变    |
| union(Set2 )             | 得到1个新集合，内含2个集合的全部元素原有的2个集合内容不变 |

### 字典

#### 定义

字典的定义，同样使用{}，也可以使用`dict()`。不过存储的元素是一个个的：键值对，如下语法：

<img src="https://typora-1309665611.cos.ap-nanjing.myqcloud.com/typora/image-20240422203802044.png" alt="image-20240422203802044" style="zoom:80%;" />

**特点**

- 键值对之间使用逗号分隔
- 可以修改
- Key和Value可以是任意类型的数据（key不可为字典）
- Key不重复，重复会对原有数据覆盖
- 无序，所以不能用下标
  - 可以通过key检索，**同样使用[]运算符**

#### 常用方法

| 方法名            | 说明                                          |
| ----------------- | --------------------------------------------- |
| dict[Key]         | 获取指定Key对应的Value值                      |
| dict[Key] = Value | **添加或更新键值对**                          |
| pop(Key)          | 取出Key对应的Value并在字典内删除此Key的键值对 |
| clear()           | 清空字典                                      |
| keys()            | 获取字典的全部Key，可用于for循环遍历字典      |

### 数据容器总结

是否支持下标索引支持：

- 列表、元组、字符串 - 序列类型
- 不支持：集合、字典 - 非序列类型

是否支持重复元素：

- 支持：列表、元组、字符串 - 序列类型
- 不支持：集合、字典 - 非序列类型

是否可以修改支持：

- 列表、集合、字典
- 不支持：元组、字符串

**遍历：**

- 5类数据容器都支持for循环遍历列表、元组、字符串支持while
- 循环，集合、字典不支持（无法下标索引）

**排序：**

- sorted(容器, [reverse=True])将给定容器进行排序
- **注意，排序后都会得到列表（list）对象。**

## 函数

**多个返回值**

在return时用逗号隔开

> 实际上此时返回的是一个元组

举例

```python
def test():
	return 1,2
x,y = test()
```

**函数的四种类型参数**

- 位置参数,调用函数时根据函数定义的参数位置来传递参数

也就是最常见的参数。

 注意：**传递的参数和定义的参数的顺序及个数必须一致**

```python
def user(name ,age,gender):
	函数体
user('tom',20,'男')
```

- 关键字参数，函数调用时通过“键=值”形式传递参数.

举例

```python
def user(name ,age,gender):
	函数体
user(name='tom',age=20,gender='男')
```

注意：**函数调用时，如果有位置参数时，位置参数必须在关键字参数的前面，但关键字参数之间不存在先后顺序**

- 缺省参数。缺省参数也叫默认参数，用于定义函数，为参数提供默认值

```python
def user(name ,age=20,gender):
	函数体
user(name='tom',gender='男')
```

- 不定长参数。不定长参数也叫可变参数。用于传递0到n个参数

不定长参数有两种类型。

①位置传递    

传进的所有参数都会被`*args`变量收集，**它会根据传进参数的位置合并为一个元组(tuple)，args是元组类型**，这就是位置传递

```python
def user(*args):
	print(args)
    
#('tom',20)
user('tom',20)
```

②关键字传递

 参数是“键=值”形式的形式的情况下, 所有的“键=值”都会被`**kwargs`接受, 同时会根据“键=值”组成字典

```python
def user(**kwargs):
	print(kwargs)
    
#{'name':'tom','age':20}
user(name='tom',age=20)
```

### 匿名函数

- 函数的定义中def关键字，可以定义带有名称的函数
- lambda关键字，可以定义匿名函数（无名称）

有名称的函数，可以基于名称重复使用。**无名称的匿名函数，只可临时使用一次。**

语法格式

`lambda 参数:函数体 `

> 和java相比。这里参数和函数体都不加括号， ->变成 :

举例

```python
def test(compute):
	print(compute(1,2))
    
#3
test(lambda x,y:x+y)
