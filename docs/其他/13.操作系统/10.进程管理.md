---
title: 进程管理
date: 2024-03-20
tags: 
  - 
categories: 
  - 其他
  - 操作系统
---

### 基础概念

#### **进程**

我们编写的代码只是一个存储在硬盘的静态文件，通过编译后就会生成二进制可执行文件，当我们运行这个可执行文件后，它会被装载到内存中，接着 CPU 会执行程序中的每一条指令，那么这个**运行中的程序，就被称为「进程」（Process）**。

**中断**

一种解决阻塞的机制。**阻塞**指的是CPU因为需要等待资源而空闲的状态。

比如，进程从硬盘读数据，CPU本来应该**阻塞**等待数据返回。有了中断机制，CPU可以去处理其他进程。当数据传输完后，收到**中断**，

CPU继续运行这个进程。

<img src="https://typora-1309665611.cos.ap-nanjing.myqcloud.com/typora/image-20240323071931341.png" alt="image-20240323071931341" style="zoom:67%;" />



> 中断时必须保存当前状态信息，以便之后回来继续处理

**并发**

中断就已经有了这种**多个程序、交替执行**的思想。

>对于一个支持多进程的系统，CPU 会从一个进程快速切换至另一个进程，其间每个进程各运行几十或几百个毫秒。

虽然**单核**的 CPU 在某一个瞬间，只能运行一个进程。但在 1 秒钟期间，它可能会运行多个进程，这样就产生**并行的错觉**，实际上这是**并发**。

>进程有着「**运行 - 暂停 - 运行**」的活动规律

还有个并行的概念容易混淆，**并行**是对于**多核**CPU执行多个任务，**并发**是**单个**CPU执行多个任务（微观上交替执行）

![image-20240323072922871](https://typora-1309665611.cos.ap-nanjing.myqcloud.com/typora/image-20240323072922871.png)

**进程的状态**

在上面，我们知道了进程有着「运行 - 暂停 - 运行」的活动规律。一般说来，一个进程并不是自始至终连续不停地运行的，它与并发执行中的其他进程的执行是相互制约的。

它有时处于运行状态，有时又由于某种原因而暂停运行处于等待状态，当使它暂停的原因消失后，它又进入准备运行状态。

所以，**在一个进程的活动期间至少具备三种基本状态，即运行状态、就绪状态、阻塞状态。**

<img src="https://typora-1309665611.cos.ap-nanjing.myqcloud.com/typora/image-20240323075815886.png" alt="image-20240323075815886" style="zoom:80%;" />

- 运行状态（*Running*）：该时刻进程占用 CPU；
- 就绪状态（*Ready*）：可运行，由于其他进程处于运行状态而暂时停止运行；
- 阻塞状态（*Blocked*）：该进程正在等待某一事件发生（如等待输入/输出操作的完成）而暂时停止运行，这时，即使给它CPU控制权，它也无法运行；

当然，进程还有另外两个基本状态：

- 创建状态（*new*）：进程正在被创建时的状态；
- 结束状态（*Exit*）：进程正在从系统中消失时的状态；



<img src="https://typora-1309665611.cos.ap-nanjing.myqcloud.com/typora/image-20240323075846213.png" alt="image-20240323075846213" style="zoom:80%;" />

再来详细说明一下进程的状态变迁：

- *NULL -> 创建状态*：一个新进程被创建时的第一个状态；
- *创建状态 -> 就绪状态*：当进程被创建完成并初始化后，一切就绪准备运行时，变为就绪状态，这个过程是很快的；
- *就绪态 -> 运行状态*：处于就绪状态的进程被操作系统的进程调度器选中后，就分配给 CPU 正式运行该进程；
- *运行状态 -> 结束状态*：当进程已经运行完成或出错时，会被操作系统作结束状态处理；
- *运行状态 -> 就绪状态*：处于运行状态的进程在运行过程中，由于分配给它的运行时间片用完，操作系统会把该进程变为就绪态，接着从就绪态选中另外一个进程运行；
- *运行状态 -> 阻塞状态*：当进程请求某个事件且必须等待时，例如请求 I/O 事件；
- *阻塞状态 -> 就绪状态*：当进程要等待的事件完成时，它从阻塞状态变到就绪状态；
