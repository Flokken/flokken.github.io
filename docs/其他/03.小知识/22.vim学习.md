---
title: vim学习
date: 2023-06-14
tags: 
  - linux
categories: 
  - 其他
  - 小知识
---

> 参考
>
> https://zhuanlan.zhihu.com/p/68111471
>
> https://zhuanlan.zhihu.com/p/149515175
>
> https://www.runoob.com/linux/linux-vim.html
>
> [精通 vim 你应该理解的几个名词](https://zhuanlan.zhihu.com/p/96801314)
>
> [vim插件](https://zhuanlan.zhihu.com/p/139847548)

首先，vim自动操作文档，命令模式输入`help`，即可调出文档

## vim介绍

VIM 常用的有四个模式，：

- 正常模式 (Normal-mode)
- 插入模式 (Insert-mode)
- 命令模式 (Command-mode)
- 可视模式 (Visual-mode)

**正常模式（Normal-mode) ？**

正常模式一般用于浏览文件，也包括一些复制、粘贴、删除等操作。这时击键时，一些组合键就是 vim 的功能键，而不会在文本中键入对应的字符。

**插入模式？（Insert-mode)**

在正常模式中按下个别字母键（后面会详细介绍），会进入插入模式。

例如按 `i` 键会进行插入模式。该模式启动以后，就会进入编辑状态，通过键盘输入内容。

**命令模式（Command-mode)**

在正常模式中，按下`：`（冒号）键或者`/` （斜杠），会进入命令模式。在命令模式中可以执行一些输入并执行一些 VIM 或插件提供的指令，就像在shell里一样。这些指令包括设置环境、文件操作、调用某个功能等等。

**可视模式（Visual-mode）**

在正常模式按下`v, V, <Ctrl>+v`，可以进入可视模式。可视模式中的操作有点像拿鼠标进行操作，选择文本的时候有一种鼠标选择的即视感，有时候会很方便。

下面记录一下我经常用到的，用到什么就记什么。

1首先要打开文件file，就直接vim file(如果输入多个，vim可以打开多个)，然后进去之后在正常模式

2打开之后肯定要编辑，按i可以进入编辑模式就可以自由编辑了

3设置行号，按esc退出编辑到正常模式，然后按`:`到命令模式，`set nu`显示行号，`set nonu`取消行号

4修改完成后命令`wq`保存退出



### 命令模式

#### 定位

`:n`定位到n行

#### 查找

**/{str}**，如：/zempty 会在文本中匹配 zempty 的地方高亮。

查找文本中匹配的目标字符串，查到以后，输入键盘上的 n 会去寻找下一个匹配，N 会去寻找上一个匹配。

#### **处理大小写的区分**

`:set i`

编辑器将不会区分大小写，如果你进行该设置之后，进行关键字查询如 /zempty 如果文本中有 Zempty ,zEmpty,....,只要是字符相同不会区分大小写都会进行匹配。

`:set noic`

该命令用来区分大小写的查询。

#### 删除

`:n1,n2d`

n1 和 n2 指的是起始行号和结束行号，d 是删除关键字

#### **文本的替换**

`:{作用范围}s/{目标}/{替换}/{替换的标志}`

作用范围分为当前行、全文、选区等等。

`:s/zempty/handsome/g`

将会把当前光标所在行的 zempty 替换成 handsome

`:%s/zempty/handsome/g`

将会把全文中的 zempty 替换成 handsome

`:n1,n2s/zempty/handsome/g`

这里的 n1 和 n2 是行号，将会替换掉 n1 到 n2 的所有 zempty 为 handsome.

**命令结尾的 `g `即是替换标志之一**，表示全局 `global `替换（即替换目标的所有出现）。

> 换成i也可以，表示大小写不敏感，I大小写敏感

**作用范围的标志（s前面的符号）**

空替换标志表示作用于当前行，从光标处开始查找替换，仅仅替换第一次匹配 zempty 的地方为handsome 。

% 替换掉文件中所有行第一次出现 zempty 的地方为 handsome 。

### 正常模式

VIM 正常模式下，主要进行的操作有光标的移动，复制文本，删除文本，黏贴文本等。

#### 移动光标

`h` 是向左移动光标，`l` 是向右移动光标，`j` 是向下移动光标，`k` 是向上移动光标，`h , j , k ,l` 等同于键盘上的 `↑ ,↓ ,← , →` 的功能。

##### **当前行移动**

`0 `移动到行头

`$` 移动到行尾

`w` 光标移动到下一个单词的开头

`e` 光标移动到下一个单词的结尾

##### 跨行移动

`nG `光标定位到第 n 行的行首

`gg `光标定位到第一行的行首

`G `**光标定位到最后一行的行首**

`H `光标定位到当前屏幕的第一行行首

`M` 光标移动到当前屏幕的中间

`L` 光标移动到当前屏幕的尾部

#### **VIM 的复制，黏贴 ，删除**

三个重要的快捷键 `d` , `y` , `p`

##### 删除

`d` 是删除的意思，通常搭配一个字符 ( 删除范围 ) 实现删除功能，常用的如下：

`dd` 删除一整行

`dG` 删除光标所在行到文本的结束

`dH` 删除屏幕显示的第一行文本到光标所在的行

`dw` 删除一个单词

> `dnw` 删除 n 个单词,y,p也可以加n来复制和粘贴

##### 复制

`y` 是复制的意思，通常搭配一个字符（复制范围）实现复制的功能，常用的如下：

`yy` 复制一行

`yw` 复制一个单词

`y$` 复制光标到本号的结尾

`yH` 复制屏幕显示的第一行文本到光标所在的行

`yG` 复制光标所在行到文本的结束

##### 粘贴

`p` 在光标后开始黏贴

`P` 在光标前开始黏贴

#### 重复命令

该命令是重复上一个操作的命令n<command>重复某个命令 n 次，
如 10p复制 10 次，10dd 删除十次。

### 可视化模式

正常模式按v，V，ctrl+v都能进入

> 屏幕底部应该会有一个 VISUAl 的提示，操作 h,j,k,l就选中文本，继续按 v 退出可视化模式。

可视化模式下选择操作区域以后，
按下 d会删除选择的区域，
按下 y 会复制选择的区域，按下 p 会黏贴选择的区域。

## 经常用的命令

### 回退上一步

进入normal模式，按u

### 复制全文

normal模式按`ggVG`，可以选中全文，此时在visual模式，所以在按下y复制即可

> 但是这样只是在vim中复制，如果需要复制到其他编译器，选中之后还是按ctrl+c复制到剪切板

### 复制/删除一行

yy复制一行，dd删除一行



